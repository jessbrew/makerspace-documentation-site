!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fdd81868-794b-3454-909a-9fe44805fad7")}catch(e){}}();
define(["require","exports","./c_ui_copy_to_dropbox_copy_to_dropbox_helper","./e_file_viewer_static_scl_page_folder","react","./c_files_view_file_actions_api_v2","./c_api_v2_routes_folders_info_provider","./c_api_v2_routes_password_confirmation_provider","./e_core_exception","./c_lodash","./c_core_i18n","./c_src_sink_index","./c_pap-events_docsend_view_docsend_hub_entry_button","metaserver/static/js/langpack","./e_edison","./e_data_modules_stormcrow","./c_core_notify","react-dom","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider"],(function(e,o,r,i,_,n,a,l,t,s,c,d,u,v,p,f,E,m,A,I){"use strict";function R(e){return e&&e.__esModule?e:{default:e}}var N=R(_);const S=i.lazyAfterDisplay((async()=>{const{SaveFileModal:o}=await new Promise((function(o,r){e(["./c_portable_save_as_copy_save_modal.after-display"],o,r)}));return{default:o}})),y=e=>N.default.createElement(N.default.Suspense,{fallback:null},N.default.createElement(S,{...e}));y.displayName="AsyncSaveFileModal";o.portableSaveAsCopy=({shareToken:e,user:o,file:_},{onSuccess:a,onError:l,onNetworkRequest:t,onModalClose:s},c,d)=>{const u=i.parseLink(_.href);let v={};if(o&&(v={is_email_verified:o.is_email_verified}),i.logEvent(i.TiburonEventName.SaveToDropbox,_.file_id,void 0,null==o?void 0:o.id,u,null!=d?d:i.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE,v),i.isSharedFile(_)&&!c)r.saveContentAndRedirect({shareToken:e,copyable:_,user:o,origin:d});else{p={user:o,onConfirm:async()=>{var s;try{null==t||t();const n=await r.copySharedFile(e,o.id);i.logEvent(i.TiburonEventName.SaveToDropboxConfirm,_.file_id,void 0,null==o?void 0:o.id,u,null!=d?d:i.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE),null==a||a(),i.redirect(n)}catch(e){i.logEvent(i.TiburonEventName.SaveToDropboxFailed,_.file_id,void 0,null==o?void 0:o.id,u,null!=d?d:i.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE);const r=e instanceof i.ApiError?{isError:!0,error:e.error,error_summary:null!==(s=e.summary)&&void 0!==s?s:"unknown"}:n.createUndefinedRpcResult();null==l||l(r)}},onCancel:()=>{i.logEvent(i.TiburonEventName.SaveToDropboxCancel,_.file_id,void 0,null==o?void 0:o.id,u,null!=d?d:i.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE),null==s||s()},fileName:i.getFilename(_)},i.Modal$1.showInstance(N.default.createElement(y,{...p}))}var p}}));
//# sourceMappingURL=c_portable_save_as_copy.js-vflCg_Pwl.map

//# debugId=fdd81868-794b-3454-909a-9fe44805fad7