!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="47c9bf31-1293-397e-8830-f6a59c8a844f")}catch(e){}}();
define(["exports","react","./c_file_transfers_async_browse_entry_point_onboarding_modal_async","./e_file_viewer_static_scl_page_folder","./c_sharing_async_share_modal_util","./e_data_modules_stormcrow","./e_edison","./c_src_bindings_provider","./c_views_copy_link_mini_modal_after_display_utils","./c_shareme24_browse_integration_logger","./c_api_v2_routes_password_confirmation_provider","./e_core_exception","./c_lodash","./c_api_v2_routes_folders_info_provider","./c_src_common_constants","./c_pap-events_docsend_view_docsend_hub_entry_button","./c_core_i18n","./c_src_sink_index","metaserver/static/js/langpack","./c_upload_kit_lib_types","./c_browse_models","./c_core_notify","react-dom","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider","./c_datatypes_sharing_account-metadata","./c_shared_with_redux_store","./c_reduxjs_toolkit_redux-toolkit","./c_pap-events_previews_create_folder","./c_browse_data_selectors","./c_tagging_utils","./c_search_search_helpers","./c_pap-events_navigation_select_create_folder_action","./c_dig-icons_assets_ui-icon_line_star","./c_browse_action_logger","./c_files_view_util","./c_pnm_utils","./c_onboarding_survey_lib_oa_pulsar_campaigns","./c_sync_everything_redux_selectors","./c_sync_everything_redux_types","./c_sharing_avatar_info","./c_tagging_data_store","./c_sync_everything_redux_store","./c_contacts_contact","./c_validators","./c_file_viewer_title_bar_title_bar_pass_ui","./c_flux_dispatcher","./c_flux_action_type","./c_core_utils_browser_detection","./c_core_utils_uuid","./c_viewer_hoc","./c_flux_base_store","./c_sharing_content_info","./c_cloud_docs_constants","./c_sharing_low_distraction_view_gating_utils","./c_file_viewer_common_share_helpers","./c_sharing_sharing_pap_logging_send_share_invite_util","./c_dig-components_typeahead_index","./c_dig-icons_assets_ui-icon_line_upload","./c_dig-components_chip_index","./c_dig-icons_assets_ui-icon_line_share","./c_dig-components_skeleton_index","./c_dig-icons_assets_ui-icon_line_settings","./c_dig-icons_assets_ui-icon_line_home","./c_react-intl_src_components_message","./c_src_common_format_bytes","./c_api-v2-client_src_dropbox","./c_react_query_helpers_queries_login_and_register_constants"],(function(e,t,r,a,n,i,o,s,_,c,l,d,u,p,f,g,m,E,h,v,S,y,b,x,I,w,O,C,$,k,M,P,R,F,A,T,N,L,D,W,G,V,j,B,q,H,U,Y,z,J,K,Q,X,Z,ee,te,re,ae,ne,ie,oe,se,_e,ce,le,de,ue,pe){"use strict";function fe(e){return e&&e.__esModule?e:{default:e}}var ge=fe(t);const me=a.defineContext(""),Ee=(e,t)=>"previews"===e?a.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE:"split_share_menu"===t?a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS:a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,he=e=>{const t=(e=>a.useInitStore(e,(e=>{const t=a.proxy((()=>e.get().fileOrFolder)),r=a.proxy((()=>e.get().user)),n=a.proxy((()=>e.get().shareModalExtras)),i=a.proxy((()=>e.get().modalRef)),o=a.proxy((()=>e.get().actionSurface)),s=a.proxy((()=>e.get().actionElement)),_=a.proxy((()=>e.get().progressiveInbandVariant)),c=a.store(Date.now()),l=a.store(void 0);return{$fileOrFolder:t,$user:r,$shareModalExtras:n,$modalRef:i,$isOpen:a.store(e.get().isOpen),$actionSurface:o,$actionElement:s,$progressiveInbandVariant:_,$openFlexibleEntryPointTimestamp:c,$dwellFlexibleEntryPointActionTimestamp:l,$sessionId:a.proxy((()=>e.get().sessionId)),$overlayPlacement:a.proxy((()=>e.get().overlayPlacement)),$props:e}})))(e),r=Ee(e.actionSurface,e.actionElement);return ge.default.createElement(ge.default.Fragment,null,ge.default.createElement(s.SharingSdkProvider,{userApiProps:e.user,origin:r,actionInfo:{actionSurface:e.actionSurface}},ge.default.createElement(ve,{store:t})))};he.displayName="ShareMe24Browse";const ve=({store:e})=>{const t=a.useStore(e.$fileOrFolder),i=t.is_dir,o=a.useStore(e.$actionElement),c=a.useStore(e.$actionSurface),l=a.useStore(e.$sessionId),d=a.useStore(e.$isOpen),u=a.useStore(e.$modalRef),p=a.useStore(e.$overlayPlacement),f=(e=>ge.default.useCallback((()=>{e.$props.get().onRequestClose(),e.$dwellFlexibleEntryPointActionTimestamp.set(void 0)}),[e]))(e),g=(e=>ge.default.useCallback((()=>{e.$props.get().onInbandShareCompleted(),e.$isOpen.set(!1)}),[e]))(e),{onActionClicked:m}=e.$props.get(),E=ge.default.useMemo((()=>t.is_dir?t.target_ns?{".tag":"shared_folder",sharedFolderId:String(t.target_ns)}:{".tag":"file_folder",name:t.ns_path.split("/").pop()||"",path:t.fq_path}:{".tag":"file",fileId:t.file_id}),[t]),h=ge.default.useMemo((()=>t.is_dir?t.target_ns?{type:"shared_folder"}:{type:"file_folder"}:{type:"file",name:a.filename(t.fq_path),size:t.bytes}),[t]),v=ge.default.useMemo((()=>({actionSurface:c,actionElement:o,contentAction:"share",tiburonOrigin:Ee(c,o)})),[c,o]),S=a.useStore(e.$progressiveInbandVariant),y=a.useStore(e.$props).onFallback,{variant:b}=a.useExperimentVariant("file_transfers_app_action"),x="ON"===b,I=t.is_dir?r.folderEligibleForTransfer(t):!t.is_cloud_doc,w=_.useShowCopyLinkMiniModalCallback(),O="ON"===a.useExperimentVariant("pro_sharing_presentation_links").variant,C=ge.default.useCallback(((t,r,a)=>{const{actionSurface:n,actionElement:i,fileOrFolder:o,user:s}=e.$props.get();let _=()=>{};const c=new Promise((e=>{_=e}));if(navigator.clipboard.write){const e=new ClipboardItem({"text/plain":c});navigator.clipboard.write([e])}else c.then((e=>navigator.clipboard.writeText(e)));const l={write:e=>_(e)};w.fn({user:s,filePath:o.file_id,setIsCreatingSharedLink:()=>{},anchorRef:u,browseFile:o,placement:p,yOffsetDistance:5,zIndexOverride:500,actionSurface:n,actionElement:i,origin:Ee(n,i),isLowDistractionViewEnabled:O,isFromShareMe24Modal:!0,snackbarModeOnly:t,onSuccessResult:r,onErrorResult:a,clipboardWriter:l})}),[e,p,w,u,O]),$=ge.default.useCallback((()=>{const{user:t,fileOrFolder:a,actionSurface:n,actionElement:i}=e.$props.get(),o=`sm24_${n}_${i}`,s=[a];r.asyncShowBrowseEntryPointOnboardingModal({primaryActionOnClick:()=>r.redirectToCreateTransferWithFiles(s,o),userId:t.id})}),[e]),k=(e=>ge.default.useCallback((t=>{const r=e.$props.get(),i=r.user,o=r.fileOrFolder,s={...r.shareModalExtras,initialScreen:a.SETTINGS_SCREEN,openSettingsFromFlexibleSharingEntrypoint:!0,openLinkSettings:t.shouldOpenLinkSettings};n.asyncShowShareModal(i,o,s)}),[e]))(e);return ge.default.createElement("div",null,ge.default.createElement(s.MetadataProvider,{sharingObjectIdentifier:E,shareModalSessionId:l},ge.default.createElement(a.ContextProvider,{context:me,value:l},ge.default.createElement(a.ContextProvider,{context:s.Context,value:v},ge.default.createElement(a.ContextProvider,{context:s.Context$1,value:h},ge.default.createElement(s.Provider,{objectIdentifier:E,sessionId:l},ge.default.createElement(ye,{sessionId:l,actionElement:o,actionSurface:c,isDir:i},ge.default.createElement(Se,{onFallback:y},ge.default.createElement(s.Main,{displayMode:"anchored_v1",displayModeRef:u,displayModePositioning:p,isOpen:d,onRequestClose:f,inbandSharingMode:"controlled_v1",copyLinkMode:"controlled_v1",copyLinkHandler:C,transferMode:"controlled_v1",transferHandler:$,settingsMode:"controlled_v1",settingsHandler:k,objectIdentifier:E,progressiveInbandVariant:S,canUserUseTransfer:x,canContentUseTransfer:I,referrerLoggingMetadata:v,objectLoggingMetadata:h,onActionClicked:m,onInbandShareCompleted:g,fileOrFolder:t})))))))))};ve.displayName="ShareMe24BrowseInternals";const Se=({children:e,onFallback:r})=>{const a=s.useData(),n=ge.default.useRef(!1);return t.useEffect((()=>{"error"!==a.status||n.current||(n.current=!0,r())}),[a.status,r]),"error"===a.status?null:ge.default.createElement(ge.default.Fragment,null,e)};Se.displayName="DataLoadingFallbackWrapper";const ye=({children:e,sessionId:r,actionElement:a,actionSurface:n,isDir:i})=>{const o=s.useData(),_=ge.default.useRef(!1);return t.useEffect((()=>{if(!_.current)return"error"===o.status?(_.current=!0,void c.defaultEmitter.select(c.ON_LOADING_WRAPPER_DETECT_FAILURE).emit({sessionId:r,actionElement:a,actionSurface:n,isDir:i})):"loaded"===o.status?(_.current=!0,void c.defaultEmitter.select(c.ON_LOADING_WRAPPER_DETECT_SUCCESS).emit({sessionId:r,actionElement:a,actionSurface:n,isDir:i})):void 0}),[o.status,r,a,n,i]),t.useEffect((()=>()=>{_.current||(_.current=!0,c.defaultEmitter.select(c.ON_LOADING_WRAPPER_DETECT_CANCEL).emit({sessionId:r,actionElement:a,actionSurface:n,isDir:i}))}),[]),ge.default.createElement(ge.default.Fragment,null,e)};ye.displayName="DataLoadingLogger",e.DataLoadingFallbackWrapper=Se,e.ShareMe24Browse=he}));
//# sourceMappingURL=c_shareme24_browse_integration_index.after-display.js-vfl7fI1K8.map

//# debugId=47c9bf31-1293-397e-8830-f6a59c8a844f