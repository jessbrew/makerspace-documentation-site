!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f1cf0089-33cd-3c85-85ff-3d26b8bbceab")}catch(e){}}();
define(["exports","./c_api_v2_routes_hellosign_provider","./e_file_viewer_static_scl_page_folder","./c_profile_services_profile_services_link","./c_core_i18n","./e_core_exception","react"],(function(e,t,a,i,s,n,o){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var r,d=l(o);e.Strings=void 0,(r=e.Strings||(e.Strings={})).OK=s.intl.formatMessage({id:"G6rEKj",defaultMessage:"OK"}),r.NEXT=s.intl.formatMessage({id:"yah+je",defaultMessage:"Next"}),r.BACK=s.intl.formatMessage({id:"k9vJ0G",defaultMessage:"Back"}),r.CANCEL=s.intl.formatMessage({id:"S53N5s",defaultMessage:"Cancel"}),r.CREATE=s.intl.formatMessage({id:"cVVoCl",defaultMessage:"Create"}),r.SAVE=s.intl.formatMessage({id:"HqImMi",defaultMessage:"Save"}),r.LEARN_MORE=s.intl.formatMessage({id:"sUsXMb",defaultMessage:"Learn more"}),r.DONE=s.intl.formatMessage({id:"H/MlMr",defaultMessage:"Done"}),r.FINISH=s.intl.formatMessage({id:"n4dBJ7",defaultMessage:"Finish"}),r.CLOSE=s.intl.formatMessage({id:"/nCb7L",defaultMessage:"Close"}),r.DISMISS=s.intl.formatMessage({id:"h4rpeQ",defaultMessage:"Dismiss"}),r.CONFIGURE_NOW=s.intl.formatMessage({id:"vQKdKf",defaultMessage:"Configure now"}),r.RECONFIGURE=s.intl.formatMessage({id:"DN+Nvb",defaultMessage:"Reconfigure"}),r.CONFIRM_PREFERENCE=s.intl.formatMessage({id:"qlRt63",defaultMessage:"Confirm your preference"}),r.MANAGE_PREFERENCE=s.intl.formatMessage({id:"ILUbaa",defaultMessage:"Manage preference"}),r.SHOW_IN_GOOGLE_DRIVE=s.intl.formatMessage({id:"S0LHV5",defaultMessage:"Show in Google Drive"}),r.LINK_ACCOUNT=s.intl.formatMessage({id:"JhmneM",defaultMessage:"Link account"}),r.GET_MIGRATION_SETTINGS_ERROR=s.intl.formatMessage({id:"C40Kmf",defaultMessage:"Could not fetch migration settings"}),r.SET_MIGRATION_SETTINGS_ERROR=s.intl.formatMessage({id:"omeHSB",defaultMessage:"Could not update migration settings"}),r.EDIT_APP_PERMISSIONS=s.intl.formatMessage({id:"GYeDWi",defaultMessage:"Edit app permissions"}),r.MIGRATION_FOLDER=s.intl.formatMessage({id:"vp+jh3",defaultMessage:"Dropbox"}),r.DEFAULT_SHORTCUT_NAME=s.intl.formatMessage({id:"o9Zw70",defaultMessage:"Untitled"}),r.VIEW_SUMMARY=s.intl.formatMessage({id:"9m2UYm",defaultMessage:"View summary"}),r.LOADING_ANIMATION=s.intl.formatMessage({id:"2/JlYM",defaultMessage:"Loading animation..."}),r.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT=s.intl.formatMessage({id:"hC4dZf",defaultMessage:"You do not have permission to move your Google files to Google Drive. Please reach to your admin to get permission"}),r.CONVERT_NOW=s.intl.formatMessage({id:"Iff87z",defaultMessage:"Convert now"}),r.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT=s.intl.formatMessage({id:"u9TFTP",defaultMessage:"Please link to the Google account of the same email as your Dropbox account."}),r.FAIL_TO_LINK_GOOGLE_ACCOUNT=s.intl.formatMessage({id:"4L5zkJ",defaultMessage:"Failed to link Google account."}),r.GOOGLE_AUTH_FAILED=s.intl.formatMessage({id:"4Mo3Jb",defaultMessage:"Google authentication failed"}),r.GOOGLE_AUTH_POPUP_BLOCKED=s.intl.formatMessage({id:"6EyPz0",defaultMessage:"Pop-up blocked. Please disable pop-up blockers in order to link your Google account"});const _=["documents"];var m;async function f(i,s){const n=new a.DefaultUserApiV2Client(i),o=await t.GetProfileServicesRoutes(n).rpc("list_linked_services",void 0,{});let l=!1;for(const t of o.linked_services){if(!("google"===t.service_type[".tag"]))continue;if(!("is_connected"===t.connection_state[".tag"]))continue;if(_.every((e=>t.granted_permissions.some((t=>t[".tag"]===e))))&&(l=!0,!s||t.display_name===s))return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}return l?e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}async function c(s,n){const o=s.email;if(!n){const i=await f(s,o);if(i===e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK;if(i===e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK)try{await async function(e){const i=new a.DefaultUserApiV2Client(e);await t.GetProfileServicesRoutes(i).rpc("unlink",{service:{".tag":"google"}},{})}(s)}catch(e){}}const l=new i.ProfileServicesLinkingHandler,r=await l.auth_service_with_user_promise(a.ProfileServicesConstants.GOOGLE,s.id,null,"link_read_files",void 0,void 0,_,void 0,o);return r.success?r.display_name===o?e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:e.GddMigrationCompatibleLinkStatus.NOT_LINKED}e.GddMigrationCompatibleLinkStatus=void 0,(m=e.GddMigrationCompatibleLinkStatus||(e.GddMigrationCompatibleLinkStatus={}))[m.HAS_COMPATIBLE_LINK=0]="HAS_COMPATIBLE_LINK",m[m.HAS_INCOMPATIBLE_LINK=1]="HAS_INCOMPATIBLE_LINK",m[m.NOT_LINKED=2]="NOT_LINKED";const g=t=>"window_not_created"===t?e.Strings.GOOGLE_AUTH_POPUP_BLOCKED:"window_closed"!==t?e.Strings.GOOGLE_AUTH_FAILED:void 0;a.injectInternalStyle("/static/metaserver/static/js/cloud_docs/shared_components/templates/modal_template.module.out-vflEkYJAG.css",(e=>"._modalTemplateWrapper_1iofx_1{display:flex;flex-direction:row}._modalTemplateContainer_1iofx_6{align-items:flex-start;display:flex;flex:1;flex-direction:column;padding:0}._modalTemplatePaper_1iofx_15{align-items:flex-start;align-self:stretch;display:flex;flex-direction:row;padding:var(--spacing__unit--3) var(--spacing__unit--3) 0}._modalTemplateContent_1iofx_24{align-items:flex-start;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0}._modalTemplateHeading_1iofx_34{align-items:flex-start;display:flex;flex-direction:row;padding:var(--spacing__unit--4) var(--spacing__unit--3) var(--spacing__unit--2)}._modalTemplateText_1iofx_42{padding:0 var(--spacing__unit--3)}._modalTemplateActions_1iofx_46{align-items:center;align-self:stretch;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:var(--spacing__unit--3)}._modalTemplateButtonGroup_1iofx_56,._modalTemplateTertiaryActionContainer_1iofx_65{align-items:center;display:flex;flex-direction:row;gap:var(--spacing__unit--1);padding:0}._modalTemplateTertiaryActionContainer_1iofx_65{flex-grow:1;justify-content:flex-end}._modalTemplateImageFrame_1iofx_76{align-items:center;background:var(--color__opacity--3);display:flex;flex:1;flex-direction:column;justify-content:center;min-height:420px;min-width:400px;position:relative}@media (max-width:767.98px){._modalTemplateImageFrame_1iofx_76{display:none}}"));const u="_modalTemplateWrapper_1iofx_1",p="_modalTemplateContainer_1iofx_6",M="_modalTemplatePaper_1iofx_15",E="_modalTemplateContent_1iofx_24",L="_modalTemplateHeading_1iofx_34",T="_modalTemplateText_1iofx_42",C="_modalTemplateActions_1iofx_46",I="_modalTemplateButtonGroup_1iofx_56",O="_modalTemplateTertiaryActionContainer_1iofx_65",N="_modalTemplateImageFrame_1iofx_76",A=({actions:e,ariaLabel:t,appElement:i,bodyText:s,height:n,infoTextAboveModalTitle:o,tertiaryActions:l,title:r,rightFrameComponent:_,onRequestClose:m,open:f,width:c,withCloseButton:g})=>(a.Modal.setAppElement(i||document.body),d.default.createElement(a.Modal,{onRequestClose:m,open:null==f||f,width:c,isCentered:!0,shouldCloseOnOverlayClick:!1,withCloseButton:g,"aria-labelledby":t},d.default.createElement("div",{className:u,style:{minHeight:null!=n?n:"auto"}},d.default.createElement("div",{className:p},o&&d.default.createElement("div",{className:M},d.default.createElement(a.Text,{size:"small",color:"faint"},o)),d.default.createElement("div",{className:E},d.default.createElement("div",{className:L},d.default.createElement(a.Title,null,r)),d.default.createElement("div",{className:T},s)),d.default.createElement("div",{className:C},e&&d.default.createElement("div",{className:I},e),l&&d.default.createElement("div",{className:O},l))),_&&d.default.createElement("div",{className:N},_))));A.displayName="ModalTemplate",e.ModalTemplate=A,e.ensureUserHasGddMigrationCompatibleLink=c,e.ensureUserHasLinkedAccountAndReport=async t=>{try{const i=await c(t);switch(i){case e.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK:return!0;case e.GddMigrationCompatibleLinkStatus.HAS_INCOMPATIBLE_LINK:a.Snackbar.failSticky(e.Strings.LINK_TO_INCOMPATIBLE_GOOGLE_ACCOUNT);break;case e.GddMigrationCompatibleLinkStatus.NOT_LINKED:a.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT);break;default:a.Snackbar.failSticky(e.Strings.FAIL_TO_LINK_GOOGLE_ACCOUNT),n.enforceExhaustive(i)}}catch(e){const t=g(e);t&&a.Snackbar.failSticky(t)}return!1},e.fetchUserHasGddMigrationCompatibleLink=f,e.getUserFriendlyLinkAccountErrorMessage=g}));
//# sourceMappingURL=c_shared_components_templates_modal_template.js-vflLvaGNu.map

//# debugId=f1cf0089-33cd-3c85-85ff-3d26b8bbceab