!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2f5cd8e3-0b84-3f77-b72d-6775272403b5")}catch(e){}}();
define(["require","exports","react","./c_admin_registration_source_constants","./e_file_viewer_static_scl_page_folder"],(function(e,i,n,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n);const s=(i,n)=>async t=>{const{Store:o,ungatedDBStore:a}=await new Promise((function(i,n){e(["./c_ungated_idx_db_access_lib"],i,n)})),s=await a.getLatestUngatedSessionKeyForStore(i===r.PreviewType.SsrDoc?o.PDF_EDIT_STORE:o.IMG_EDIT_STORE);if(s){const e=await a.getFileMetadata(s);t===r.Mode.REGISTER&&await a.saveFileMetadata(s,{...e,user_registered:"true"})}n?r.redirect(n):r.reload()},g={[r.AuthMode.LOGIN]:r.Mode.LOGIN,[r.AuthMode.REGISTER]:r.Mode.REGISTER},_={[r.LoginOrRegisterKind$1.COMMENT]:r.LoginOrRegisterKind.COMMENT,[r.LoginOrRegisterKind$1.DOWNLOAD]:r.LoginOrRegisterKind.DOWNLOAD,[r.LoginOrRegisterKind$1.IMMEDIATE]:r.LoginOrRegisterKind.IMMEDIATE,[r.LoginOrRegisterKind$1.POSTDOWNLOAD]:r.LoginOrRegisterKind.POSTDOWNLOAD,[r.LoginOrRegisterKind$1.POSTSAVEAS]:r.LoginOrRegisterKind.POSTSAVEAS,[r.LoginOrRegisterKind$1.SIDEBAR]:r.LoginOrRegisterKind.SIDEBAR,[r.LoginOrRegisterKind$1.UNGATED_AI]:r.LoginOrRegisterKind.UNGATED_AI,[r.LoginOrRegisterKind$1.LOGGED_OUT_EDIT]:r.LoginOrRegisterKind.LOGGED_OUT_EDIT,[r.LoginOrRegisterKind$1.SHARED_LINK_UNGATED_EDIT]:r.LoginOrRegisterKind.SHARED_LINK_UNGATED_EDIT,[r.LoginOrRegisterKind$1.TRANSCRIPT]:r.LoginOrRegisterKind.TRANSCRIPT,[r.LoginOrRegisterKind$1.LOGGED_OUT_PDF_EDIT]:r.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT,[r.LoginOrRegisterKind$1.LOGGED_OUT_PDF_SIGN]:r.LoginOrRegisterKind.LOGGED_OUT_PDF_SIGN,[r.LoginOrRegisterKind$1.SURFACE_LEVEL_PREVIEW]:r.LoginOrRegisterKind.SURFACE_LEVEL_PREVIEW,[r.LoginOrRegisterKind$1.LOGGED_OUT_PDF_EDIT_TEXT]:r.LoginOrRegisterKind.LOGGED_OUT_PDF_EDIT_TEXT},d={[r.CommentTextVariant.DEFAULT]:r.CommentTextVariant$1.DEFAULT,[r.CommentTextVariant.POST]:r.CommentTextVariant$1.POST,[r.CommentTextVariant.SUBSCRIBE]:r.CommentTextVariant$1.SUBSCRIBE,[r.CommentTextVariant.QUICK_REACT]:r.CommentTextVariant$1.QUICK_REACT};async function E({mode:i,kind:n,sharedLinkUrl:o,encryptionOptions:E,commentParams:O,loggingExtra:T,webSignInTag:R,signupTag:L,implicitTOSVariant:l,onCancel:c,authDialogPreviousElement:D,previewType:I,sharedLinkInfo:S}){if(i===r.AuthMode.LOGIN&&!E)throw new Error("encryptionOptions should be provided for login modal");const[{Modal:u},{LoginOrRegisterModal:m}]=await Promise.all([new Promise((function(i,n){e(["./e_file_viewer_static_scl_page_folder"],i,n)})).then((function(e){return e.modal_esnext})),new Promise((function(i,n){e(["./c_auth_login_or_register_modal"],i,n)}))]),A=o;let K=o;const G=_[n]===r.LoginOrRegisterKind.SHARED_LINK_UNGATED_EDIT&&I?s(I,o):void 0;if(K){const e=new URL(K);e.searchParams.set("from_auth","register"),K=e.href}u.showInstance(a.default.createElement(m,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:g[i],kind:_[n],onCancel:()=>{null==c||c(),u.close()},onAuthenticateSuccess:(e,i)=>{if(G)G(i);else if(i===r.Mode.REGISTER){const e=new URL(K||window.location.href);return e.searchParams.set("from_auth","register"),void window.location.assign(e.href)}window.location.reload()},commentParams:O?{stream:O.stream,variant:d[O.variant]}:void 0,signup_tag:L||t.RegistrationSource.SHMODEL_MODAL_REGISTER,showGoogleRegistration:!0,loginContinuationUrl:A,registrationContinuationUrl:K,encryptionOptions:E,loggingExtra:T,implicitTOSVariant:l||r.TOSVariant.IMPLICIT_TOS_WITH_SERVICES_AGREEMENT,webSignInTag:R||"file_viewer_default",authDialogPreviousElement:D,sharedLinkInfo:S}))}var O=Object.freeze({__proto__:null,showAuthModal:E});i.getOnUngatedAuthSuccess=s,i.showAuthModal=E,i.show_auth_modal_esnext=O}));
//# sourceMappingURL=c_file_viewer_common_show_auth_modal.js-vflDLYNP3.map

//# debugId=2f5cd8e3-0b84-3f77-b72d-6775272403b5