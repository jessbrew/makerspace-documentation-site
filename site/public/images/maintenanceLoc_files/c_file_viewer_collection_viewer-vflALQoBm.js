!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f01885ab-9049-3acc-b234-1a59d2c31e09")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_folder","./e_core_exception","./c_api_v2_routes_folders_info_provider","./c_api_v2_redux_file_viewer","./c_lodash","./c_queries_utils_preview_metadata","./c_react-redux_hooks_useDispatch","./c_core_i18n","./c_src_sink_index","./c_pap-events_docsend_view_docsend_hub_entry_button","./c_api_v2_routes_password_confirmation_provider","metaserver/static/js/langpack","./e_edison","./e_data_modules_stormcrow","./c_core_notify","react-dom","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider","./c_plugin_utils_getImageDefaultSizes","./c_admin_registration_source_constants","./c_src_common_filepath","./c_unity_utils","./c_extensions_open_button_types","./c_extensions_client","./c_action_bar_action_bar_strings","./c_action_plugins_conversion_action_conditions","./c_action_plugins_download_action_definition","./c_file_viewer_action_plugins_titlebar_button","./c_file_viewer_action_plugins_titlebar_button2","./c_file_viewer_preview_tour_preview_tour_configs","./c_pdf_editor_plugin_show_plugin_util","./c_api_v2_routes_hellosign_provider","./c_cloud_docs_constants","./c_pap-events_sign_save_signature_doc","./c_file_viewer_context_migration_context","./c_dig-icons_assets_ui-icon_line_rewind","./c_browse_models","./c_src_bolt_flows_client","./c_replay_replay_extensions","./c_api_v2_routes_flows_provider","./c_viewer_hoc","./c_photo-editor_plugin_use_image_enhancements","./c_google_one_tap_google_one_tap_platform","./c_atoms_dwg-box_index","./c_helpers_hooks_component-did-mount","./c_react-transition-group_CSSTransition","./c_ungated_idx_db_access_lib","./c_memoize-one","./c_react_query_helpers_queries_file_content_metadata","./c_preview_audio_video_video_editing_strings","./c_preview_audio_video_video_editing_utils","./c_core_logging_actions","./c_file_viewer_api_navigation","./c_core_data_ui","./c_file_viewer_hooks_usePrevious","./c_core_data_actions","./c_dig-icons_assets_ui-icon_line_scale","./c_dig-icons_assets_ui-icon_line_shuffle","./c_file_viewer_title_bar_title_bar_right_section","./c_action_plugins_comment_action_button","./c_file_viewer_comments2_utils","./c_dig-icons_assets_ui-icon_line_expand-left","./c_react-intl_src_components_message","./c_file_viewer_title_bar_title_bar_pass_ui","./c_flux_dispatcher","./c_flux_action_type","./c_core_utils_browser_detection","./c_core_utils_uuid","./c_flux_base_store","./c_sharing_content_info","./c_sharing_low_distraction_view_gating_utils","./c_file_viewer_common_share_helpers","./c_extensions_data_types","./c_onboarding_survey_lib_oa_pulsar_campaigns","./c_user_education_user_education_client","./c_integrations_data_store","./c_integrations_data_selectors","./c_views_copy_link_mini_modal_after_display_utils","./c_tagging_data_store","./c_tagging_utils","./c_search_search_helpers","./c_pap-events_navigation_select_create_folder_action","./c_sync_everything_redux_store","./c_sync_everything_redux_types","./c_sharing_logger","./c_stormcrow_stormcrow_exposure_logger","./c_file_viewer_hooks_use_mouse_active","./c_juggle_resize-observer_ResizeObserver","./c_hooks_use_stabilized_callback","./c_file_viewer_common_show_auth_modal","./c_file_viewer_mobile_web_redesign_mobile_action_bar","./c_mobile_web_redesign_actions_use_actions","./c_action_plugins_delete_action_definition","./c_starred_redux_slice","./c_reduxjs_toolkit_redux-toolkit","./c_pap-events_previews_create_folder","./c_dig-icons_assets_ui-icon_line_file","./c_dig-icons_assets_ui-icon_line_star","./c_plugin_utils_drawWatermarkOnCanvas","./c_react-use_misc_util","./c_dig-icons_assets_ui-icon_line_key","./c_sharing_sharing_pap_logging_create_shared_link_util","./c_dig-icons_assets_ui-icon_line_file-history","./c_action_plugins_audio_video_edit_action_definition","./c_dig-icons_assets_ui-icon_line_stamp","./c_dig-icons_assets_ui-icon_line_signature","./c_file_actions_portable_select_destination","./c_folder_dialog_constants","./c_src_browse-action-bar_types","./c_dig-icons_assets_ui-icon_line_zip","./c_files_view_util","./c_pnm_utils","./c_file_viewer_mobile_web_redesign_mobile_header","./c_dig-components_drawer_index","./c_dig-components_list_index","./c_file_viewer_preview_archive","./c_file_viewer_hooks_useTouchInteraction","./c_src_sidebar","./c_file_viewer_components_titlebar_dropdowns","./c_dig-components_skeleton_index","./c_file_viewer_components_preview_button","./c_viewer_helpers","./c_file_viewer_logging_timing","./c_web-vitals","./c_file_viewer_hooks_lifecycle_logging","./c_file_viewer_preview_content","./c_file_viewer_loading_indicator","./c_file_viewer_toolbar_fullscreen_button","./c_file_viewer_toolbar_utils","./c_dig-icons_assets_ui-icon_line_person-circle","./c_dig-icons_assets_ui-icon_line_passwords","./c_dig-icons_assets_ui-icon_line_video","./c_dig-icons_assets_ui-icon_line_thumbs-up","./c_dig-icons_assets_ui-icon_line_twinkle-2","./c_dig-icons_assets_ui-icon_line_shape-rotate-right","./c_dig-icons_assets_ui-icon_line_text-box","./c_dig-icons_assets_ui-icon_line_upload-file","./c_action_plugins_transcript_action_utils","./c_dig-icons_assets_ui-icon_line_full-width","./c_file_viewer_toolbar","./c_file_viewer_toolbar_toolbar_holder","./c_file_viewer_keyboard_bindings","./c_preview_audio_video_helper_dimensions","./c_file_viewer_toolbar_toolbar_holder2","./c_dig-icons_assets_ui-icon_line_zoom-out","./c_dig-icons_assets_ui-icon_line_upload","./c_file_viewer_preview_archive_utils","./c_file_viewer_preview_text","./c_core_riviera_transcripts","./c_portable_delete","./c_portable_delete_strings","./c_files_view_file_actions_api_v2","./c_portable_delete_snackbars","./c_files_view_file_actions_snackbars","./c_portable_rename_snackbars","./c_file_actions_strings","./c_referrer_cleansing_redirect","./c_security_csrf_hmac","./c_security_crypto","./c_pap-events_previews_delete_file","./c_file_viewer_preview_tour_mini_modal","./c_file_viewer_preview_logger","./c_file_viewer_pap_logger_utils","./c_core_logging_video","./c_file_viewer_preview_tour_async_tour","./c_file_viewer_preview_tour_utils","./c_contacts_hooks","./c_contacts_contact","./c_validators","./c_profile_services_profile_services_link","./c_abuse_login_and_register_constants_fetch","./c_react_query_helpers_queries_login_and_register_constants","./c_sharing_async_share_modal_util","./c_styled-components","./c_growth_ui_api","./c_previews_util","./c_resize-observer-polyfill_ResizeObserver","./c_dig-logos_src_glyph_fss","./c_src_common_format_bytes"],(function(e,i,t,n,r,o,s,_,c,l,a,u,d,p,f,v,g,w,h,S,m,C,F,O,y,I,x,b,T,P,R,k,E,V,A,L,D,N,H,M,K,U,B,q,j,W,z,Q,G,$,Y,J,X,Z,ee,ie,te,ne,re,oe,se,_e,ce,le,ae,ue,de,pe,fe,ve,ge,we,he,Se,me,Ce,Fe,Oe,ye,Ie,xe,be,Te,Pe,Re,ke,Ee,Ve,Ae,Le,De,Ne,He,Me,Ke,Ue,Be,qe,je,We,ze,Qe,Ge,$e,Ye,Je,Xe,Ze,ei,ii,ti,ni,ri,oi,si,_i,ci,li,ai,ui,di,pi,fi,vi,gi,wi,hi,Si,mi,Ci,Fi,Oi,yi,Ii,xi,bi,Ti,Pi,Ri,ki,Ei,Vi,Ai,Li,Di,Ni,Hi,Mi,Ki,Ui,Bi,qi,ji,Wi,zi,Qi,Gi,$i,Yi,Ji,Xi,Zi,et,it,tt,nt,rt,ot,st,_t,ct,lt,at,ut,dt,pt,ft,vt,gt,wt,ht){"use strict";function St(e){return e&&e.__esModule?e:{default:e}}var mt=St(i);function Ct(e,i){return function(e,i){const n=t.getApiDataForFile(e,i);return n?n.status:void 0}(e,i)===t.ApiClientStatus.Request}const Ft=50;function Ot(e,i,n,r){return async(o,_)=>{const c=function(e,i,n=!1){if(n)return i;const r=t.getApiDataForFiles(e,i);return s.filter(i,(e=>{const i=t.getFileRevisionId(e);return!e.is_dir&&(!r[i]||!r[i].data&&r[i].status===t.ApiClientStatus.Error)}))}(_(),e,n);if(0===c.length)return;const l=function(e,i){if(e.length<=0)return[];if(e.length<i)return[e];const t=Array(Math.ceil(e.length/i));let n=0,r=0;for(;n<e.length;)t[r++]=e.slice(n,n+=i);return t}(c,Ft),a=l.map((e=>async function(e,i,n,r){const o=function(e){return e.reduce(((e,i)=>(e[t.getFileRevisionId(i)]={data:void 0,status:t.ApiClientStatus.Request},e)),{})}(i);e(yt(o));try{const s=await function(e,i,n=!1){if(!i)return Promise.reject(new Error("user not logged in, no support for un-auth'd users yet"));const r={files:e.map((e=>({ns_id:e.ns_id,sj_id:e.sjid}))),include_dimensions:n};return i?t.GetPreviewsRoutes(new t.DefaultUserApiV2Client(i)).rpc("get_preview_data_batch",r,{}):t.GetPreviewsRoutes(new t.NoAuthApiV2Client).rpc("get_preview_data_batch",r,{})}(i,n,r);return e(function(e,i){const n=i.results.reduce(((e,i)=>(e[t.getFileRevisionId({ns_id:i.file.ns_id,sjid:i.file.sj_id})]=i,e)),{});return{type:t.ActionTypes.UpdatePreviewData,payload:e.reduce(((e,i)=>{const r=n[i],o={data:null==r?void 0:r.preview,status:t.ApiClientStatus.Success};return e[i]=o,e}),{})}}(Object.keys(o),s))}catch(i){return e(function(e){return{type:t.ActionTypes.UpdatePreviewData,payload:s.mapValues(e,(e=>({data:void 0,status:t.ApiClientStatus.Error})))}}(o))}}(o,e,i,r)));return Promise.all(a)}}const yt=function(e){return{type:t.ActionTypes.UpdatePreviewData,payload:e}};function It(e,i,n){const r=t.getFileRevisionOrHrefId(e);let o=n.find((e=>t.getFileRevisionOrHrefId(e)===r));if(!o){const i=e.file_id;o=n.find((e=>e.file_id===i))}if(!o&&n.length>0&&void 0!==i){let e=i;return i>=n.length&&(e=n.length>1?n.length-1:0),{correctFile:n[e],correctIndex:e}}o||(o=e);const s=n.indexOf(o);return-1===s?{correctFile:o,correctIndex:0}:{correctFile:o,correctIndex:s}}function xt(e,i){const{currentIndex:t,currentFiles:n}=e;switch(i.type){case"next_file":{const i=t+1>=n.length?0:t+1;return{...e,currentIndex:i}}case"previous_file":{const i=t<=0?n.length-1:t-1;return{...e,currentIndex:i}}case"replace_current_file":{const r=[...n];return r[t]=i.newFile,{...e,currentFiles:r}}case"update_with_provided_files":{const{hasFlippedFiles:r,file:o,files:s}=i,_=n[t],c=s.filter((e=>!e.is_dir)),l=r?_:o,a=t,{correctIndex:u,correctFile:d}=It(l,a,c),p=a!==u,f=l.file_id!==d.file_id,v="fq_path"in l&&"fq_path"in d&&l.fq_path!==d.fq_path;return p||f||v?{...e,currentFiles:c,currentIndex:u}:e}case"set_current_index":return{...e,currentIndex:i.newIndex}}}function bt(e,i=!0){const n=r.URI.parse(t.DBHistory.get_url()),o=r.URI.encode_parts(n.getPath());let s=n.removeQuery("select").removeQuery("page");if(null==e)s=s.removeQuery("preview"),s=s.removeQuery("t"),s=s.removeQuery("e");else{const i=t.getFilename(e),n=r.URI.parse(e.href).getQuery();s=s.updateQuery({preview:i,t:null==n?void 0:n.t,e:null==n?void 0:n.e})}const _=s.getQuery();i?t.DBHistory.push_state(o,_,{immediatelyRestoreState:!1}):t.DBHistory.replace_state(o,_)}function Tt({disableRouting:e,initialFile:i,skipOuterRouting:n,updatePreviewUrl:r}){mt.default.useEffect((()=>(n||e||bt(i,!0),()=>{n||e||bt(null,!0)})),[i,n,e]);const o=t.useStabilizedCallback((i=>{r?r(i):e||bt(i,!1)}));return{updateUrl:o}}function Pt(e){const{brandingInfo:i,canRestoreRevision:n,closeFile:r,commentId:s,defaultLeftSidebarPluginId:_,defaultRightSidebarPluginId:c,editActivationParams:l,encryptionOptions:a,file:u,fileCount:d,fileIndex:p,fileViewOrigin:f,flipToNextFile:v,flipToPreviousFile:g,hideOpenInAppInterstitial:w,onFileChanged:h,onRestoreRevision:S,previewCollection:m,previewContentOnly:C,sharedLinkInfo:F,sharePermission:O,shareToken:y,shouldFocusComment:I,skipPreviewTourModal:x,updateFiles:b,user:T,isInsideBackup:P,browseContext:R,browseExceptions:k}=e;if(!T)throw new Error("User is required to browse files");let E;switch(f){case t.FileViewOriginType.VERSION_HISTORY:E=t.SDKPreviewSurface.VERSION_HISTORY;break;case t.FileViewOriginType.HOME:E=t.SDKPreviewSurface.HOME;break;case t.FileViewOriginType.HELLOSIGN:E=t.SDKPreviewSurface.HELLOSIGN;break;case t.FileViewOriginType.STARRED:E=t.SDKPreviewSurface.STARRED;break;case t.FileViewOriginType.RECENTS:E=t.SDKPreviewSurface.RECENTS;break;case t.FileViewOriginType.SEARCH:E=t.SDKPreviewSurface.SEARCH;break;case t.FileViewOriginType.PHOTOS:E=t.SDKPreviewSurface.PHOTOS;break;default:E=t.SDKPreviewSurface.BROWSE}let{sourceContext:V}=e;return(P||t.isBackupBrowse())&&(E=t.SDKPreviewSurface.BACKUP,V=t.SourceContext.Backup),mt.default.createElement(o.FileViewerWithCSS,{brandingInfo:i,browseContext:R,browseExceptions:k,canRestoreRevision:n,canShowFileFlippers:E===t.SDKPreviewSurface.SEARCH||E===t.SDKPreviewSurface.BROWSE||E===t.SDKPreviewSurface.PHOTOS,closeFile:r,commentId:s,defaultLeftSidebarPluginId:_,defaultRightSidebarPluginId:c,editActivationParams:l,encryptionOptions:a,file:u,fileCount:d,fileIndex:p,fileViewOrigin:f,flipToNextFile:v,flipToPreviousFile:g,hideOpenInAppInterstitial:w,onFileChanged:h,onRestoreRevision:S,previewCollection:m,previewContentOnly:C,previewSurface:E,sharedLinkInfo:F,sharePermission:O,shareToken:y,shouldFocusComment:I,skipPreviewTourModal:x,sourceContext:V,updateFiles:b,user:T})}function Rt(e){const{brandingInfo:i,canRestoreRevision:n,closeFile:r,encryptionOptions:s,file:_,fileCount:c,fileIndex:l,fileViewOrigin:a,flipToNextFile:u,flipToPreviousFile:d,hideOpenInAppInterstitial:p,onRestoreRevision:f,previewContentOnly:v,sharedLinkInfo:g,sharePermission:w,shareToken:h,skipPreviewTourModal:S,sourceContext:m,user:C}=e;return t.UDCL$1.track("web_previews/unknown_preview_origin",{detail:{origin:a.toString()}}),mt.default.createElement(o.FileViewerWithCSS,{brandingInfo:i,canRestoreRevision:n,canShowFileFlippers:!1,closeFile:r,encryptionOptions:s,file:_,fileCount:c,fileIndex:l,fileViewOrigin:a,flipToNextFile:u,flipToPreviousFile:d,hideOpenInAppInterstitial:p,onRestoreRevision:f,previewContentOnly:v,previewSurface:t.SDKPreviewSurface.UNKNOWN,sharedLinkInfo:g,sharePermission:w,shareToken:h,skipPreviewTourModal:S,sourceContext:m,user:C})}function kt(e){const{closeFile:i,encryptionOptions:n,file:r,fileCount:s,fileIndex:_,fileViewOrigin:c,flipToNextFile:l,flipToPreviousFile:a,hideOpenInAppInterstitial:u,onFileChanged:d,previewCollection:p,previewContentOnly:f,skipPreviewTourModal:v,sourceContext:g,user:w,sharedLinkInfo:h,sharePermission:S,shareToken:m}=e;if(!h||!S||!m)throw new Error("Missing required data to view");return mt.default.createElement(o.FileViewerWithCSS,{canShowFileFlippers:!0,closeFile:i,encryptionOptions:n,file:r,fileCount:s,fileIndex:_,fileViewOrigin:c,flipToNextFile:l,flipToPreviousFile:a,hideOpenInAppInterstitial:u,onFileChanged:d,previewCollection:p,previewContentOnly:f,previewSurface:t.SDKPreviewSurface.SHARED_COLLECTION,skipPreviewTourModal:v,sourceContext:g,user:w,sharedLinkInfo:h,sharePermission:S,shareToken:m})}function Et(e){const{brandingInfo:i,closeFile:n,encryptionOptions:r,file:s,fileCount:_,fileIndex:c,fileViewOrigin:l,flipToNextFile:a,flipToPreviousFile:u,hideOpenInAppInterstitial:d,previewContentOnly:p,sharedLinkInfo:f,sharePermission:v,shareToken:g,skipPreviewTourModal:w,sourceContext:h,user:S,loggedOutCommentingLinkSenderVariant:m}=e;if(!f||!v||!g)throw new Error("Missing required data to view");return mt.default.createElement(o.FileViewerWithCSS,{brandingInfo:i,canShowFileFlippers:!0,closeFile:n,encryptionOptions:r,file:s,fileCount:_,fileIndex:c,fileViewOrigin:l,flipToNextFile:a,flipToPreviousFile:u,hideOpenInAppInterstitial:d,previewContentOnly:p,previewSurface:t.SDKPreviewSurface.SHARED_CONTENT_LINK,sharedLinkInfo:f,sharePermission:v,shareToken:g,skipPreviewTourModal:w,sourceContext:h,user:S,loggedOutCommentingLinkSenderVariant:m})}function Vt(e){const{brandingInfo:i,closeFile:n,encryptionOptions:r,file:s,fileCount:_,fileIndex:c,fileViewOrigin:l,flipToNextFile:a,flipToPreviousFile:u,hideOpenInAppInterstitial:d,previewContentOnly:p,sharedLinkInfo:f,sharePermission:v,shareToken:g,skipPreviewTourModal:w,sourceContext:h,user:S,initialPreviewSourceContext:m}=e;if(!f||!v||!g)throw new Error("Missing required data to view");return mt.default.createElement(o.FileViewerWithCSS,{brandingInfo:i,canShowFileFlippers:m===t.SourceContext.SharedLinkFolder||m===t.SourceContext.SharedLinkCollection,closeFile:n,encryptionOptions:r,file:s,fileCount:_,fileIndex:c,fileViewOrigin:l,flipToNextFile:a,flipToPreviousFile:u,hideOpenInAppInterstitial:d,previewContentOnly:p,previewSurface:t.SDKPreviewSurface.SHARED_LINK,sharedLinkInfo:f,sharePermission:v,shareToken:g,skipPreviewTourModal:w,sourceContext:h,user:S})}function At(e){return async(i,n)=>{!function(e,i){const n=t.getApiDataForFile(e,i);return!(!n||!n.data||n.status===t.ApiClientStatus.Error)}(n(),e)&&!Ct(n(),e)&&(e.preview?i(function(e){const i={};return e.forEach((e=>{const n=t.getFileRevisionId(e),r=e.preview;r&&(i[n]={data:r,status:t.ApiClientStatus.Success})})),{type:t.ActionTypes.UpdatePreviewData,payload:i}}([e])):i(Ot([e],void 0,void 0,!0)))}}const Lt=e=>{var i;mt.default.useMemo((()=>{t.PreviewsEventLogger.mark(t.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START)}),[]),mt.default.useEffect((()=>{t.PreviewsEventLogger.mark(t.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT)}),[]);const n=mt.default.useRef(!1),{file:r,files:o}=e,[{currentFiles:l,currentIndex:a},u]=mt.default.useReducer(xt,function({files:e,file:i}){const t=e.filter((e=>!e.is_dir)),{correctIndex:n}=It(i,void 0,t);return{currentFiles:t,currentIndex:n}}(e)),d=l[a],{updateUrl:p}=Tt({initialFile:e.file,updatePreviewUrl:e.updatePreviewUrl,skipOuterRouting:e.skipOuterRouting,disableRouting:e.disableRouting}),f=c.useDispatch(),v=mt.default.useRef(!0);mt.default.useEffect((()=>{t.PreviewsEventLogger.startLoggingSession(),v.current?v.current=!1:(p(d),f(At(d)))}),[d,f,p]),mt.default.useEffect((()=>{u({type:"update_with_provided_files",file:r,files:o,hasFlippedFiles:n.current})}),[r,o]);const{onFlipNext:g}=e,w=mt.default.useMemo((()=>s.throttle((()=>{n.current=!0,null==g||g(),u({type:"next_file"})}),100)),[g,u]),{onFlipPrevious:h}=e,S=mt.default.useMemo((()=>s.throttle((()=>{n.current=!0,null==h||h(),u({type:"previous_file"})}),100)),[h,u]);mt.default.useEffect((()=>()=>{w.cancel(),S.cancel()}),[w,S]);const{onCloseViewer:m,onClose:C}=e,F=mt.default.useCallback((()=>null==m?void 0:m()),[m]),O=mt.default.useRef(C);O.current=C,mt.default.useEffect((()=>()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.call(O)}),[]);const{updateFiles:y}=e,I=mt.default.useCallback((()=>null==y?void 0:y(l,d,!0)),[y,l,d]),x=mt.default.useCallback(((e,i)=>{if(d.revision_id===e.revision_id&&t.isBrowseFile(d))if(i){const e=t.getUpdatedFile(d,i);u({type:"replace_current_file",newFile:e})}else{const{correctIndex:e}=It(d,a,l);e<l.length-1?u({type:"set_current_index",newIndex:e}):F()}}),[d,l,a,F,u]),{appDownloadInterstitialDismissed:b,brandingInfo:T,browseContext:P,browseExceptions:R,canRestoreRevision:k,containerId:E,defaultLeftSidebarPluginId:V,defaultRightSidebarPluginId:A,editActivationParams:L,encryptionOptions:D,fileViewOrigin:N,hidePageChrome:H,initialPreviewSourceContext:M,isInsideBackup:K,onRestoreRevision:U,files:B,shouldFocusComment:q,skipPreviewTourModal:j,user:W,sharedLinkInfos:z,sharePermissions:Q,shareTokens:G,loggedOutCommentingLinkSenderVariant:$,commentId:Y}=e,J=null==z?void 0:z[a],X=null==Q?void 0:Q[a],Z=null==G?void 0:G[a];mt.default.useEffect((()=>{if(d.preview){const e={file_id:d.file_id,ns_id:d.ns_id,sj_id:d.sjid,url:null==J?void 0:J.url};_.maybeCopyPreviewMetadataIntoQueryClient(d.preview,e,J)}}),[d,J]);const ee=t.useSelector((e=>B.map((i=>[t.getFileRevisionId(i),t.getApiDataForFile(e,i)]))),t.shallowEqual),ie=mt.default.useMemo((()=>Object.fromEntries(ee)),[ee]),te=l.map((e=>{var i;const n=t.getFileRevisionId(e);return null===(i=ie[n])||void 0===i?void 0:i.data})),ne=null!==(i=null!=M?M:function(e){if(e)switch(e){case t.FileViewOriginType.BROWSE:return t.SourceContext.Browse;case t.FileViewOriginType.HELLOSIGN:return t.SourceContext.HelloSign;case t.FileViewOriginType.HOME:return t.SourceContext.Home;case t.FileViewOriginType.PHOTOS:return t.SourceContext.Photos;case t.FileViewOriginType.RECENTS:return t.SourceContext.Recents;case t.FileViewOriginType.SEARCH:return t.SourceContext.Search;case t.FileViewOriginType.STARRED:return t.SourceContext.Starred;case t.FileViewOriginType.TRANSFER:return t.SourceContext.Transfer;case t.FileViewOriginType.SHARED_COLLECTION:return t.SourceContext.SharedLinkCollection}const i=t.get_uri().path;return/^\/h$/.test(i)?t.SourceContext.Home:/^\/starred$/.test(i)?t.SourceContext.Starred:/^\/recents$/.test(i)?t.SourceContext.Recents:/^\/search$/.test(i)?t.SourceContext.Search:/^\/(s|scl\/fi)\//.test(i)?t.SourceContext.SharedLinkFile:/^\/(sh|scl\/fo)\//.test(i)?t.SourceContext.SharedLinkFolder:/^\/sc\//.test(i)?t.SourceContext.SharedLinkCollection:/^\/history/.test(i)?t.SourceContext.VersionHistory:/^\/(home|work|personal)/.test(i)?t.SourceContext.Browse:void 0}(N))&&void 0!==i?i:t.SourceContext.Unknown,re={brandingInfo:T,canRestoreRevision:k,closeFile:F,containerId:E,defaultLeftSidebarPluginId:V,defaultRightSidebarPluginId:A,editActivationParams:L,encryptionOptions:D,file:d,fileCount:l.length,fileIndex:a,fileViewOrigin:N,flipToNextFile:w,flipToPreviousFile:S,hideOpenInAppInterstitial:!!b,onFileChanged:x,onRestoreRevision:U,previewCollection:te,previewContentOnly:H,sharedLinkInfo:J,sharePermission:X,shareToken:Z,shouldFocusComment:q,skipPreviewTourModal:j,sourceContext:ne,updateFiles:I,user:W,loggedOutCommentingLinkSenderVariant:$,commentId:Y};switch(N){case t.FileViewOriginType.BROWSE:case t.FileViewOriginType.VERSION_HISTORY:case t.FileViewOriginType.HOME:case t.FileViewOriginType.HELLOSIGN:case t.FileViewOriginType.PHOTOS:case t.FileViewOriginType.STARRED:case t.FileViewOriginType.RECENTS:case t.FileViewOriginType.SEARCH:return mt.default.createElement(Pt,{...re,browseContext:P,browseExceptions:R,isInsideBackup:!!K});case t.FileViewOriginType.SHARED_LINK_PAGE:return mt.default.createElement(Vt,{...re,initialPreviewSourceContext:M});case t.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:return mt.default.createElement(Et,{...re});case t.FileViewOriginType.SHARED_COLLECTION:return mt.default.createElement(kt,{...re});default:return mt.default.createElement(Rt,{...re})}};Lt.displayName="InternalCollectionViewer";const Dt=o.getStoreForFileViewer(),Nt=e=>mt.default.createElement(t.ErrorBoundary$2,{onCatch:e=>n.reportException({err:e,tags:["file-collection-viewer"],severity:"critical"})},mt.default.createElement(t.Provider,{store:Dt},mt.default.createElement(Lt,{...e})));Nt.displayName="FileCollectionViewer",e.FileCollectionViewer=Nt}));
//# sourceMappingURL=c_file_viewer_collection_viewer.js-vfl1H1VxJ.map

//# debugId=f01885ab-9049-3acc-b234-1a59d2c31e09