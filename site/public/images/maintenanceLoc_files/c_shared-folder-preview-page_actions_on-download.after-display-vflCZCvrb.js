!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="516dd7fd-f7a8-3528-9b63-8d6f6dc471d9")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_folder","./c_pap-events_docsend_view_docsend_hub_entry_button","./c_download_components_post-download-pre-susi-modal","./c_core_i18n","./e_core_exception","react","./e_edison","./c_api_v2_routes_password_confirmation_provider","./c_api_v2_routes_folders_info_provider","./e_data_modules_stormcrow","./c_core_notify","react-dom","./c_src_sink_index","./c_lodash","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider","./c_dig-illustrations_hero_remote-work","metaserver/static/js/langpack"],(function(o,e,n,t,r,i,a,l,s,d,_,c,u,w,p,v,m,T,g){"use strict";o.onDownload=(o,{entry:a,entryShareToken:l,entrySharedLinkInfo:s,origin:d,onShowPreDownloadSUSIModal:_,actionElement:c})=>{const u=o.$user.get(),w=o.$encryptionOptions.get();e.logTiburonEvent(u,a,e.TiburonEventName.ClickDownload,l,d,s.url);const p=!u&&!n.is_mobile_or_tablet(),v=()=>{e.logTiburonEvent(u,a,e.TiburonEventName.DownloadAttempt,l,d,s.url);const n={actionSurface:"shared_folder_previews",actionElement:c,...a.is_dir?{}:{fileSize:a.bytes,fileType:e.getFileTypeFromString(e.getExtension$1(a))}};e.downloadFileOrFolder(l,s,d,e.getTargetObjectMetadataFromEntry(a),u,n).then((n=>{"success"===n?(e.logTiburonEvent(u,a,e.TiburonEventName.DownloadSuccess,l,d,s.url),o.$actionNotificationTitle.set(e.formatDownloadStartText(r.intl)),u||(w?!p&&t.getIsTimeEligibleToShowPostDownloadPreSUSIModal()&&(o.$downloadIsFolder.set(a.is_dir),o.$postDownloadPreSUSIModalOpen.set(!0),e.logTiburonEvent(void 0,a,e.TiburonEventName.ViewPostDownloadPreSUSIModal,l,d,s.url,"shared_folder_download_register")):i.reportException({err:new Error("No encryption options provided to shared folder preview download button"),severity:"non-critical",tags:["sharing-encryption-options"]}))):"tooLarge"===n?(e.logTiburonEvent(u,a,e.TiburonEventName.DownloadFail,l,d,s.url,{downloadStatus:n}),o.$actionNotificationTitle.set(e.formatDownloadFolderSizeTooLargeText(r.intl))):"accessDenied"!==n&&"contentNotFound"!==n&&"invalidToken"!==n&&"unknownTokenLinkType"!==n&&"permissionDenied"!==n&&"unknownError"!==n||(e.logTiburonEvent(u,a,e.TiburonEventName.DownloadFail,l,d,s.url,{downloadStatus:n}),o.$actionNotificationTitle.set(a.is_dir?e.formatDownloadFolderGenericErrorText(r.intl):e.formatDownloadGenericErrorText(r.intl)))}))};p?_(v):v()}}));
//# sourceMappingURL=c_shared-folder-preview-page_actions_on-download.after-display.js-vfliZg9ht.map

//# debugId=516dd7fd-f7a8-3528-9b63-8d6f6dc471d9