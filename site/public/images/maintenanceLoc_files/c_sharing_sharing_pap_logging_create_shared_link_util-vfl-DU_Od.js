!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="16ff7fa3-0352-3a2d-b340-7a7e711513b2")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_folder","./c_flux_action_type"],(function(e,t,n){"use strict";const i=async e=>{const{eventState:n,actionSurface:i,actionElement:o,requestedAccessLevel:l,content:a,contentAction:s,isSm24:r}=e,d=((e,n,i,o,l,a,s)=>{const r=null==l?void 0:l.isDir,d=t.getSharedLinkRequestedAccessLevelFromString(i),c=r?t.getFolderTypeFromString(t.FILE_TYPE_TO_FOLDER_TYPE[null==l?void 0:l.type]):void 0,v=null==l?void 0:l.nsId,u=null==l?void 0:l.fileId,h=r||null==l?void 0:l.ext;return{eventState:e,actionSurface:n,actionElement:o,contentAction:a?t.getContentActionFromString(a):void 0,folderType:c,sharedLinkRequestedAccessLevel:d,isDir:r,includeNsCreation:!1,nsId:v,hasCachedLink:!1,contentIdentifier:u,fileExtension:h,shareModalType:s?t.getShareModalTypeFromString("sm24"):void 0}})(n,i,l,o,a,s,r);let c;if("success"===n&&e.metadata&&e.httpCode){const{metadata:n,httpCode:i}=e;c=await(async(e,n)=>{var i;const o={},l=null==e?void 0:e.url,a=t.getLinkTypeFromUrl(null!=l?l:"");o.httpStatusCode=n,o.createdNewLink=200===n,o.linkType=a;const s="scl"===a?t.getAccessLevelFromLinkAccessLevel(null===(i=null==e?void 0:e.link_permissions)||void 0===i?void 0:i.link_access_level):"viewer";if(o.sharedLinkResolvedAccessLevel=t.getSharedLinkResolvedAccessLevelFromString(s),o.sharedLinkIdentifier=null==e?void 0:e.id,"scl"===a){const{rlkey:e,sckey:n,encryptedRecipientInfo:i}=t.getKeysFromSclUrl(null!=l?l:"");o.rlkeySha1=e?await t.sha1Hash(e):void 0,o.sckeySha1=n?await t.sha1Hash(n):void 0,o.encryptedRecipientInfoSha1=i?await t.sha1Hash(i):void 0}else if("s"===a||"sh"===a){const e=t.getTKeyFromShmodelUrl(null!=l?l:"");o.tkeySha1=e?await t.sha1Hash(e):void 0}return o})(n,i)}else if("failed"===n||"rejected"===n){const{exception:n,httpCode:i}=e;c=((e,n)=>{const i={};return i.httpStatusCode=n,i.createSharedLinkErrorReason=t.getCreateSharedLinkErrorReasonFromString(t.COPY_LINK_EXCEPTION_TO_CREATE_SHARED_LINK_ERROR_REASON[e]),i})(n,i)}return(e=>{const t={};for(const n in e)null===e[n]?t[n]=void 0:t[n]=e[n];return t})({...d,...c})};e.getContentFromContentInfoAndMetadata=(e,n)=>{var i,o,l,a,s;const r=e.isFolder(),d=t.getContentType(e);let c,v;try{c=e.isSharedFolder()?e.sharedFolderId():void 0}catch(e){c=void 0}e.ext()?v=e.ext():(e.filename()||e.displayPath()||(null==n?void 0:n.name))&&(v=t.getFileExtensionFromFileName(null!==(o=null!==(i=e.filename())&&void 0!==i?i:e.displayPath())&&void 0!==o?o:null==n?void 0:n.name));return{type:d,isDir:r,nsId:c,ext:v,fileId:null!==(s=null!==(a=null!==(l=null==n?void 0:n.folder_id)&&void 0!==l?l:null==n?void 0:n.id)&&void 0!==a?a:e.fileId())&&void 0!==s?s:void 0}},e.getFileIdOrPath=e=>e.fileId()||e.displayPath()||"",e.logPAPCreateSharedLinkEvent=async e=>{var o,l;const a=await i(e),{eventState:s,fileIdOrPath:r,loggingKey:d,isSm24:c,actionSurface:v,actionElement:u}=e,h=n.PAP_Create_SharedLink(a);let S={};a&&c&&(S={isSm24:"true",actionSurface:v,actionElement:null!=u?u:"unknown",...a.isDir&&{folderType:null!==(o=a.folderType)&&void 0!==o?o:"unknown"},...!a.isDir&&{fileExtension:null!==(l=a.fileExtension)&&void 0!==l?l:"unknown"}});const f={isDir:(null==a?void 0:a.isDir)?"true":"false",...S};"start"===s?t.UDCL.logStart(h,{key:d||r,tags:f}):t.UDCL.logEnd(h,{key:d||r,tags:f,eventState:s})}}));
//# sourceMappingURL=c_sharing_sharing_pap_logging_create_shared_link_util.js-vflUyxlpo.map

//# debugId=16ff7fa3-0352-3a2d-b340-7a7e711513b2