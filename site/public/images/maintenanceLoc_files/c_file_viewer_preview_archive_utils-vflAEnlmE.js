!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1932c2a4-6541-31b5-8a9f-482d111533f1")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_folder","./c_file_viewer_api_navigation","./e_data_modules_stormcrow","./c_react-redux_hooks_useDispatch"],(function(e,r,t,i,l,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var u=n(r);function s(e,r){var i;return t.getClosestSubpath(e.entries,null!==(i=null==r?void 0:r.split("/").slice(1).filter(Boolean))&&void 0!==i?i:[])}const a=(e,r,t)=>{var i,l,o;return null!==(o=null===(l=null===(i=e[r])||void 0===i?void 0:i.children)||void 0===l?void 0:l.reduce(((i,l)=>{const o=`${r}/${l}`,n=t(e[o],o);return void 0!==n?[...i,n]:i}),[]))&&void 0!==o?o:[]};e.getArchiveFiles=function(e,r,i,o){if(!e.length)return;const n={file_id:r.file_id,ns_id:r.ns_id,sj_id:r.sj_id,url:r.url};t.fetchArchiveFiles(n,e,o,i,l.queryClient)},e.getChildFilePaths=(e,r)=>a(e,r,((e,r)=>(null==e?void 0:e.isDir)?void 0:r)),e.getChildren=(e,r)=>a(e,r,(e=>e)),e.getParentPath=e=>t.getSubpath(e.slice(0,e.length-1)),e.queryStringValueToArchiveCurrentPath=s,e.useMaybeSetPasswordProtectedArchiveError=()=>{var e,r;const{fileViewerId:i}=t.useFileViewerContext(),l=t.useRootPreviewMetadata(),o=t.useRootPreviewKey(i),n=t.useArchiveDataQuery(o,l),s=t.useFileViewerSelector(t.getCurrentPreviewKey,i),a=s&&t.isNestedArchiveFilePreviewKey(s)?s:void 0,d=t.useSetLocalErrorCallback(a),c=(null===(r=null===(e=n.data)||void 0===e?void 0:e.apiData)||void 0===r?void 0:r.isPasswordProtected)&&!!a;u.default.useEffect((()=>{c&&d(new t.FVError(t.FVErrorCode.PasswordProtectedArchivesNotSupported,t.ErrorLifecycle.Support))}),[c,d])},e.useUrlControl=(e,r,l)=>{const n=t.useFileViewerContext().optionalIOClients.urlClient,a=o.useDispatch(),d=t.useFileViewerSelector(t.getRootFile,e),c=i.useUpdateArchiveFileCurrentPathCallback();u.default.useEffect((()=>null==n?void 0:n.onQueryStringParameterChange(i.archiveSubpathQueryParam,((e,r)=>(e=>{var r,i;const o=s(l,e),n=t.getArchiveEntryAtPath(l.entries,o);return c(o,null!==(i=null===(r=n.entry)||void 0===r?void 0:r.isDir)&&void 0!==i&&i,!0)})(r)))),[a,e,r,l,d,c,n])}}));
//# sourceMappingURL=c_file_viewer_preview_archive_utils.js-vflctTaX7.map

//# debugId=1932c2a4-6541-31b5-8a9f-482d111533f1