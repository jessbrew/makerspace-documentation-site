!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="69aa07b0-7931-3b6b-8805-b463aa5bf219")}catch(e){}}();
define(["require","exports","react","./e_file_viewer_static_scl_page_folder","./c_core_i18n","./c_api_v2_routes_password_confirmation_provider","./e_core_exception","./c_referrer_cleansing_redirect","./c_ui_image","./c_react-use_useEffectOnce","./c_core_notify","./c_lodash","./c_dig-components_chip_index","./c_pap-events_docsend_view_docsend_hub_entry_button","./e_edison","./c_api_v2_routes_folders_info_provider","./e_data_modules_stormcrow","./c_src_sink_index","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider","react-dom","metaserver/static/js/langpack","./c_security_csrf_hmac","./c_security_crypto","./c_pap-events_previews_delete_file"],(function(e,t,a,s,n,i,l,o,c,r,u,d,f,m,g,p,v,E,N,h,_,k,y,M,R){"use strict";function T(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var w=T(a);const b=new class{asyncSharingAction(t){return new Promise((function(t,a){e(["./c_user_notifications_sharing_actions"],t,a)})).then(t)}asyncGroupAction(t){return new Promise((function(t,a){e(["./c_user_notifications_group_actions"],t,a)})).then(t)}acknowledge(e,t=!1){s.NotificationLogger.logMarkAsReadForSingleNotification(e,t),function(e){s.SilentBackgroundBeaconRequest({url:s.GetUrlForAck(),subject_user:e.userId,data:{nids:JSON.stringify([e.id])},dataType:"json"})}(e)}actionPerformed(e,t,a=!1){s.NotificationLogger.logAction(e,t,a),s.isUnread(e)&&this.acknowledge(e,a)}triggerBluenoteAction(e,t,a,n,i=!1){if(this.actionPerformed(t,n,i),a.actionType===s.BluenoteActionTypes.OpenUrl)e.preventDefault(),this.performBluenoteOpenUrlAction(e,a.params);else{if(a.actionType===s.BluenoteActionTypes.MountSharedFolder)return this.asyncSharingAction((e=>{e.performBluenoteMountSharedFolder(t,a.params)}));if(a.actionType===s.BluenoteActionTypes.ApproveGroupJoinRequest)return this.asyncGroupAction((e=>{e.performBluenoteApproveGroupJoinRequestAction(t,a.params)}));if(a.actionType===s.BluenoteActionTypes.RemoveGroupJoinRequest)return this.asyncGroupAction((e=>{e.performBluenoteRemoveGroupJoinRequestAction(t,a.params)}))}return Promise.resolve()}performBluenoteOpenUrlAction(e,t){t.urlPath&&(e.ctrlKey||e.metaKey?o.safe_open_tab_and_redirect(t.urlPath):o.redirect(t.urlPath))}},A=({notification:e,buttonLabel:t,buttonIndex:a})=>{const{inRailNav:n}=w.default.useContext(s.UserNotificationsContext);return w.default.createElement(s.Button,{className:s.classes$1.feedNotificationButton,variant:a>0?"opacity":"outline",onClick:t=>{t.currentTarget.disabled=!0;const s=(e.typeData.buttonActions||[])[a];b.triggerBluenoteAction(t,e,s,"button_"+a,n),t.stopPropagation(),t.preventDefault()}},t)};A.displayName="UserNotificationButton";const x=e=>{const t=s.getShortName(e.display_name);return t?"@"+t:""},S=e=>!!e.match(/^\p{Emoji_Presentation}$/gu),C=({notification:e,isAcknowledged:t,quickReactionState:a})=>{const n=e.typeData.icon,i=s.cx({[s.classes$1.feedImage]:!0,[s.classes$1.feedImageBluenote]:!0});let l=null;if(t||(l=w.default.createElement(s.Badge,{className:s.classes$1.feedRowBadge,variant:s.isBellRedesignBlue()?"attention":"alert"})),a&&S(a))return w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageQuickReaction,"data-testid":"comment-notification-emoji"},a));if(a)return w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageQuickReaction,"data-testid":"comment-notification-icon"},w.default.createElement(s.UIIcon,{src:r.CheckmarkCircleFill,color:"var(--dig-color__success__base)",size:"large"})));if(n&&n.avatarUrl)return w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageAvatar},w.default.createElement(s.Avatar,{src:n.avatarUrl,hasNoOutline:!0})));if(n&&n.avatarInitials){const e=n.avatarInitials;return w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageAvatar},w.default.createElement(s.Avatar,{hasNoOutline:!0},e)))}return(null==n?void 0:n.lowResIconUrl)&&(null==n?void 0:n.highResIconUrl)?w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageAvatar},w.default.createElement(c.Image,{src:n.lowResIconUrl,srcHiRes:n.highResIconUrl}))):w.default.createElement("div",{className:i},l,w.default.createElement("div",{className:s.classes$1.feedImageAvatar},w.default.createElement(s.Avatar,{hasNoOutline:!0,colorPalette:{background:"var(--color__glyph__accent)",foreground:"#f2f7ffff"}},w.default.createElement(s.UIIcon,{src:s.DropboxLine,size:"large"}))))};C.displayName="UserNotificationImage";const $=({notification:e})=>{const t=e.typeData.displayMessage;return t?w.default.createElement("button",{tabIndex:-1,className:s.classes$1.feedTextButton},w.default.createElement(s.Text,{size:"medium",className:s.classes$1.feedTextButtonText},w.default.createElement("span",{dangerouslySetInnerHTML:{__html:u.purify.sanitize(t)}}))):null};$.displayName="UserNotificationText";const B=({object:e})=>{const{type:t,name:a}=e||{};return t&&a?w.default.createElement("div",{className:s.classes$1.previewThumbnailWrapper},w.default.createElement("div",{className:s.classes$1.previewThumbnail},"dropbox-file"===t?w.default.createElement(s.FileIcon,{size:"small",extension:s.file_extension(a),className:s.classes$1.previewThumbnailIcon}):w.default.createElement(s.FolderBaseDefaultSmall,{className:s.classes$1.previewThumbnailIcon}),w.default.createElement(s.Text,{className:s.classes$1.previewThumbnailText,color:"standard",size:"xsmall"},a))):null};B.displayName="ThumbnailPreview";const Z=[n.intl.formatMessage({id:"eGVP/f",defaultMessage:"ðŸ‘"}),n.intl.formatMessage({id:"U5fgWD",defaultMessage:"Yes"}),n.intl.formatMessage({id:"gWxS/S",defaultMessage:"No"}),n.intl.formatMessage({id:"QbgeuN",defaultMessage:"Approved"})],I=[n.intl.formatMessage({id:"eGVP/f",defaultMessage:"ðŸ‘"}),n.intl.formatMessage({id:"l8ukhY",defaultMessage:"Thanks"}),n.intl.formatMessage({id:"1URVg+",defaultMessage:"Okay"})],U=[n.intl.formatMessage({id:"eGVP/f",defaultMessage:"ðŸ‘"}),n.intl.formatMessage({id:"rFWCVd",defaultMessage:"Looks good"}),n.intl.formatMessage({id:"Z3Sun7",defaultMessage:"Nice work"})],L=n.intl.formatMessage({id:"qN1eBp",defaultMessage:"There was an error. To reply to the comment, go to the file."}),P=n.intl.formatMessage({id:"VkTo0b",defaultMessage:"Read more"}),j=n.intl.formatMessage({id:"PfnZyY",defaultMessage:"Read less"}),O=({notification:e,hasPreviewQuoteBox:t,isTruncated:a,toggleTruncate:n,isLongComment:i,setLongComment:l})=>{const{user:o,isLoading:c}=s.useMustGetActiveUser(),r=e.typeData.preview,u=w.default.useRef(null),{inRailNav:d}=w.default.useContext(s.UserNotificationsContext),f=w.default.useRef(!1);if(w.default.useEffect((()=>{!f.current&&u.current&&(l(u.current.scrollHeight>u.current.clientHeight),f.current=!0)}),[u.current,l]),!r||c)return null;let m=null;r.showThumbnail&&e.bluenoteObject&&(m=w.default.createElement(B,{object:e.bluenoteObject}));let g=null;if(r.tasks&&r.tasks.tasks&&r.tasks.tasks.length>0&&r.tasks.tasks[0]){const e=r.tasks.tasks[0],t=e.isComplete?s.classes$1.previewSingleTaskTextComplete:"";g=w.default.createElement("div",{className:s.classes$1.previewSingleTask},w.default.createElement(s.Checkbox,{className:s.classes$1.previewSingleTaskCheckbox,checked:e.isComplete,disabled:!0}),w.default.createElement("div",{className:`${s.classes$1.previewSingleTaskText} ${t}`},e.name))}let p=null;return r.quote&&(p=w.default.createElement(s.Text,{size:"medium",color:"faint",ref:u,className:t?s.classes$1.previewQuoteForBox:s.classes$1.previewQuote,style:{WebkitLineClamp:a?4:"unset"}},t?q(r.quote,x(o)):r.quote)),w.default.createElement(w.default.Fragment,null,m,g,w.default.createElement("div",{"data-testid":"quote-preview-wrapper",className:t?s.classes$1.previewQuoteBox:""},p,t&&i&&w.default.createElement("button",{className:s.classes$1.notificationCommentReadMore,onClick:t=>{t.stopPropagation(),t.preventDefault(),n(!a),s.NotificationLogger.logReadMore(e,d,a?"read_more":"read_less")}},a?P:j)))};O.displayName="UserNotificationPreview";const q=(e,t)=>{if(""===t)return e;let a;try{a=e.split(new RegExp("("+d.escapeRegExp(t)+")","g"))}catch{return e}return a.map(((e,a)=>e===t?w.default.createElement(s.Text,{key:a,"data-testid":"standard-mention-text",color:"standard"},e):e))},D=({notification:e})=>{const t=s.getDisplayTime(e);return w.default.createElement(s.Text,{"data-testid":"notification-timestamp",variant:"label",size:"small",className:s.classes$1.feedTime},t)};D.displayName="UserNotificationTimestamp";const F=({notification:e,onClickQuickReaction:t=(({isEmoji:e=!1})=>{}),setErrorMessage:a=(()=>{}),quickReactionState:n,setQuickReactionState:i})=>{const[l,o]=w.default.useState(!1);w.default.useEffect((()=>{s.NotificationLogger.logUdcl(s.LoggingObjectTypes.QuickReactionShown,{})}),[]);const{user:c,isLoading:r}=s.useMustGetActiveUser();if(r)return null;const u=x(c),d=e.typeData.preview.quote;let g=I;n?g=[n]:d.includes(u)?g=Z:d.includes("@")&&(g=U);const p=e.bluenoteObject.id.replace("file_obj_",""),v=g.map(((l,c)=>{const r=S(l);return w.default.createElement(f.Chip,{onClick:n=>{n.stopPropagation(),n.preventDefault(),o(!0),t({isEmoji:r}),function(e,t,a,n,i){const l={quick_reaction_content:a,target_object_key:t,file_id:e};new s.DefaultUserApiV2Client(s.mustGetActiveUserApiV2Properties()).ns("web_notifications").rpc("mark_as_reacted",l,{}).then((()=>i&&i())).catch((()=>n&&n()))}(p,e.targetObjectKey,l,(()=>{o(!1),a(L)}),(()=>{o(!1),i(l)}))},variant:"transparent",size:"small",className:`${s.classes$1.notificationChip} ${n?s.classes$1.notificationChipSelected:""}`,disabled:!!n,key:c},w.default.createElement("div",{className:s.classes$1.notificationChipLabelContainer},w.default.createElement(s.Text,{variant:"label",size:r&&!m.safari?"large":"small",color:"faint"},l)))}));return w.default.createElement("div",{className:`notification quick-reactions ${s.classes$1.quickReactionWrapper}`,"data-testid":"quick-reactions"},l?w.default.createElement(s.Spinner,{"aria-valuetext":"loading quick reaction result",size:"xsmall"}):v)};F.displayName="UserNotificationQuickReactions";const Q=({isAcknowledged:e,notification:t,onMarkAsRead:a,onClickQuickReaction:n=(({isEmoji:e=!1})=>{}),setErrorMessage:i=(()=>{})})=>{const{inRailNav:l,getQuickReactionState:c,setQuickReactionState:r}=w.default.useContext(s.UserNotificationsContext),u=t.targetObjectKey,d=c(u)||t.quickReactionContent,f=t.typeData,[m,g]=w.default.useState(null),[p,v]=w.default.useState(!0),[E,N]=w.default.useState(!1);if(w.default.useEffect((()=>{const e=f.surfaceAction;if(null!=e&&e.actionType===s.BluenoteActionTypes.OpenUrl){const t=e.params;t.urlPath&&(async e=>{const t=await o.get_redirect_uri(e);g(t.toString())})(t.urlPath)}}),[f.surfaceAction]),!f)return null;const h=e=>{const a=t.typeData.surfaceAction;null!=a&&b.triggerBluenoteAction(e,t,a,"surface",l)},_=s.cx({[s.classes$1.feedRow]:!0,[s.classes$1.feedRowClickable]:null!=f.surfaceAction,[s.classes$1.feedRowRead]:e}),k=s.isCommentNotificationsOn()&&t.bluenoteNotificationTypeId===s.BNNotificationTypeIdentifier.COMMENTS2_COMMENT,y=k&&(!E||!p),M=w.default.createElement("div",{onClick:h,onKeyDown:e=>{e.key!==s.Key_enum.Key.Enter&&" "!==e.key||h(e)},className:_,role:"button",tabIndex:0},w.default.createElement(C,{notification:t,isAcknowledged:e,quickReactionState:d}),w.default.createElement("div",{className:s.classes$1.feedRowMainContentSection},w.default.createElement($,{notification:t}),w.default.createElement("div",{className:s.classes$1.notificationChipPreviewQuoteBoxWrapper},w.default.createElement(O,{notification:t,hasPreviewQuoteBox:k,isTruncated:p,toggleTruncate:e=>{v(e)},isLongComment:E,setLongComment:e=>N(e)}),y&&w.default.createElement(F,{notification:t,onClickQuickReaction:n,setErrorMessage:i,quickReactionState:d,setQuickReactionState:e=>{r(u,e)}})),(()=>{const e=[];return(f.buttonActions||[]).forEach(((a,n)=>{e.push(w.default.createElement(A,{key:s.getKey(t),notification:t,buttonLabel:a.buttonLabel,buttonIndex:n}))})),e.length>0?w.default.createElement("span",{className:"feed-action action-available"},e):null})(),w.default.createElement("div",{className:s.classes$1.notificationRowFooter},w.default.createElement(D,{notification:t}),!e&&w.default.createElement(G,{onClick:a}))));return m?w.default.createElement("a",{className:s.classes$1.feedRowLink,href:m},M):M};Q.displayName="BluenoteNotification";const G=({onClick:e})=>{const t=n.intl.formatMessage({id:"8cZPqM",defaultMessage:"Mark as read"});return w.default.createElement("span",{className:s.classes$1.notificationMarkAsReadWrapper},w.default.createElement(s.Tooltip,{title:t,placement:"bottom-end",openDelay:2500},w.default.createElement(s.IconButton,{className:s.classes$1.notificationMarkAsReadButton,variant:"filled",size:"large"},w.default.createElement(s.UIIcon,{"data-testid":"notification-mark-as-read",className:s.classes$1.notificationMarkAsReadIcon,src:s.CheckmarkCircleLine,"aria-label":t,onClick:t=>{t.stopPropagation(),t.preventDefault(),e()}}))))};G.displayName="MarkAsReadButton";const z=({errorMessage:e,setErrorMessage:t})=>w.default.createElement(s.Banner,{type:"alert",withCloseButton:"Close",onRequestClose:()=>{t("")},className:s.classes$1.notificationErrorBanner},w.default.createElement(s.Banner.Message,null,e));z.displayName="InRowNotificationErrorBanner";const H=({onAcknowledge:e,isAcknowledged:t,notification:a})=>{const{inRailNav:n}=w.default.useContext(s.UserNotificationsContext),[i,l]=w.default.useState(""),o=w.default.useRef(null),c=w.default.useRef(!1);s.useVisibility(o,{root:null,rootMargin:"0px",threshold:.5},!0)&&!c.current&&(s.NotificationLogger.logViewed(a,n),c.current=!0);const r=e=>{l(e)},u=t||a.status===s.NotificationStatuses.Read;return a.typeId!==s.NotificationTypes.Bluenote?null:w.default.createElement("div",{className:s.classes$1.notificationRowWrapper,ref:o},!!i&&w.default.createElement(z,{errorMessage:i,setErrorMessage:r}),w.default.createElement(Q,{isAcknowledged:u,notification:a,onMarkAsRead:()=>{e(a),s.NotificationLogger.logMarkAsReadForSingleNotification(a,n)},onClickQuickReaction:({isEmoji:t=!1})=>{e(a),s.NotificationLogger.logQuickReaction(a,t,n,!0)},setErrorMessage:r}))};H.displayName="NotificationRow";var W=({altText:e,...t})=>w.createElement("svg",{role:"presentation",...t,className:"dig-Illustration dig-13or4mr0_3-5-3 dig-Illustration-mini",viewBox:"0 0 128 128",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w.createElement("title",null,e),w.createElement("path",{d:"M42.24 10.88c1.18.586 2.55.758 3.597 1.626 1.357 1.126 2.55 2.355 3.165 4.099.406 1.155-1.06 1.225-1.008 2.086.278.221.505.048.755-.029 2.521-.77 3.85-.288 5.273 1.933.605.941 1.012 1.971 1.383 3.03.675 1.93.66 3.972 1.088 5.94.224 1.03.291 2.345 1.843 1.05.176-.148.397-.199.58-.042 1.702 1.478 3.859 2.576 4.406 5.046a45.24 45.24 0 0 1 .707 3.917c.326 2.47.314 5.02.931 7.408 1.034 3.994 2.093 7.984 3.082 11.99 1.45 5.885 1.68 11.853 1.177 17.87-.992 5.855-3.414 11.164-6.499 16.153-4.563 7.373-9.67 14.39-14.275 21.744-2.682 4.281-7.27 5.632-12.096 5.389-5.898-.298-10.627-3.322-14.515-7.543-5.562-6.038-5.091-8.579-2-14.07 1.584-2.816 3.078-5.715 3.974-8.842.563-1.965 1.763-3.843 1.434-5.961-.576-3.722-1.239-7.434-2.045-11.11-1.52-6.926-5.197-12.606-10.384-17.358-1.347-1.235-2.538-2.592-3.28-4.278-1.533-3.478.006-6.685 3.568-7.34.98-.18 2.013-.138 3.014-.074 3.482.227 6.33 2.054 9.207 3.776.777.464 1.184.592 1.309-.548.345-3.12.86-6.224 1.148-9.35.621-6.726 1.13-13.466 1.71-20.195.111-1.28.726-2.295 1.842-3.015 2.167-1.398 4.205-1.1 6.301.493.528-2.153 2.176-3.05 3.965-3.795h.643Z",fill:"#BE4B0A"}),w.createElement("path",{d:"M104.922 48.5c1.094-.724 1.949-1.322 2.838-1.87 1.955-1.2 4.051-1.887 6.381-1.567 2.474.339 4.042 1.984 4.202 4.48.278 4.316-.784 8.355-2.688 12.188a274.78 274.78 0 0 1-4.394 8.519c-1.456 2.691-2.422 5.565-3.296 8.467-.682 2.266-.432 4.544.371 6.752 1.882 5.165 4.192 10.135 6.883 14.931.496.883.964 1.783 1.399 2.695.435.918.489 1.868-.112 2.742-1.84 2.672-2.867 2.499-4.64.448-4.986-5.776-7.901-12.553-9.264-19.913-.967-5.21.48-10.253 2.819-14.99 1.274-2.579 2.509-5.174 3.821-7.734 1.203-2.355 1.859-4.864 2.259-7.456.352-2.281-.272-3.987-1.651-4.62-1.539-.705-3.469-.301-4.848 1.456-2.419 3.081-5.03 5.926-8.275 8.15-.79.54-1.559 1.123-2.39 1.59-3.735 2.096-7.214 4.516-10.08 7.748-.385.435-.855.803-1.323 1.151-.601.445-1.231.221-1.814-.073-.611-.307-.46-.886-.41-1.414.106-1.108.663-2.013 1.29-2.88 2.256-3.133 5.19-5.498 8.538-7.335 3.235-1.776 6.214-3.92 9.193-6.07.66-.477 1.252-.96 1.079-1.946-.874-4.998-.432-9.993.118-14.98.455-4.127 1.005-8.245 1.514-12.367.189-1.526-.359-2.7-1.648-3.552-1.834-1.207-3.543-.72-4.416 1.28-2.157 4.96-2.922 10.211-3.274 15.555-.233 3.562-.394 7.13-.97 10.66-.201 1.228-.515 2.402-1.385 3.34-.358.384-.74.874-1.344.653-.57-.205-.662-.78-.727-1.322a76.096 76.096 0 0 1-.345-14.361c.349-4.95 1.45-9.664 3.936-14.013 1.203-2.102-1.056-5.811-3.447-5.834-.947-.01-1.116.707-1.385 1.31-1.885 4.22-2.906 8.674-3.575 13.228-.847 5.808-1.551 11.622-1.395 17.514.048 1.817-.339 3.5-2.3 4.339-1.61.688-1.972.486-2.049-1.242-.32-7.389.353-14.694 1.786-21.942a77.364 77.364 0 0 1 1.306-5.427c.166-.602 1.2-1.578-.141-1.959-1.082-.307-2.378-.534-3.098.838-.825 1.578-1.267 3.284-1.504 5.03-1.01 7.502-2.07 15-2.467 22.564-.106 2.003-1.22 3.078-2.835 3.872-.887.435-1.309.122-1.309-.842-.006-4 .087-7.996.422-11.983.167-1.962.413-3.917.66-5.873.054-.441.21-.86-.375-1.027-.508-.144-.819.15-1.017.56-.541 1.11-.884 2.285-1.076 3.501-.313 2.003-1.097 3.786-2.553 5.222-.403.397-.883.948-1.504.688-.582-.243-.64-.93-.704-1.513-.483-4.416 2.483-9.703 6.589-11.542.956-.43 1.363-.954 1.513-1.965.323-2.173 1.002-4.247 2.144-6.148 1.95-3.244 4.8-5.075 8.57-5.379.845-.067 1.373-.377 1.817-1.056 1.018-1.555 2.484-2.63 4.068-3.533 3.296-1.881 6.736-.457 7.513 3.23.285 1.356.67 1.231 1.635.7 3.229-1.78 6.941-.912 8.503 1.98.816 1.508.707 3.214.758 4.852.141 4.602-.819 9.12-1.126 13.693-.214 3.168-.49 6.333-.758 9.795l-.013.006ZM63.02 91.23c-.028-1.31 1.946-3.415 3.249-3.502.617-.041.832.388 1.062.803 5.223 9.476 11.27 18.442 16.903 27.668.505.828 1.081 1.609.121 2.547-.953.934-1.936 1.238-3.139.505-1.757-1.068-3.206-2.505-4.464-4.076-5.38-6.727-9.734-14.09-13.3-21.924-.294-.643-.386-1.324-.431-2.019v-.003Z",fill:"currentColor"}),w.createElement("path",{d:"M41.789 43.706c.72-4.634.06-8.73.208-12.823.106-2.931.253-5.859 1.28-8.656.86-2.342 2.285-4.192 4.576-5.302.58-.282 1.18-.55 1.83-.493.644.058 1.31.224 1.479.986.17.752-.407.992-.954 1.257-1.66.803-2.422 2.173-2.867 3.959-.842 3.372-.538 6.774-.611 10.166-.103 4.794-.096 9.59-.16 14.384-.023 1.712-2.352 4.186-3.971 4.262-.957.045-.781-.752-.79-1.25-.046-2.343-.02-4.686-.02-6.49Zm-9.171 1.011c1.104-7.722.192-15.54 1.072-23.264.22-1.927.467-3.965 2.198-5.3.528-.406 1.149-.998 1.843-.63.592.314.317 1.085.279 1.629-.586 8.387-.02 16.822-1.005 25.194-.067.579-.064 1.17-.06 1.753.012 2.048-.868 3.258-2.785 3.927-1.069.374-1.517-.026-1.542-1.072-.016-.746-.004-1.492-.004-2.237h.004Zm18.867 9.373c.474-5.45.237-10.89.326-16.327.061-3.68 1.837-6.371 5.07-8.112.812-.438 1.676-.717 2.604-.627 1.037.1 1.936.512 1.913 1.722-.019 1.081-.681 1.744-1.776 1.92-.05.01-.105.003-.16.01-2.844.351-2.892.348-3.1 3.282-.288 4.048-.064 8.103-.09 12.157-.013 1.763-.083 3.523-.617 5.223a7.243 7.243 0 0 1-.634 1.462c-.688 1.165-1.61 2.63-2.94 2.291-1.163-.297-.283-1.984-.59-2.998l-.006-.003Zm-28.345-.02c0-1.276-.02-2.556.006-3.833.016-.87.246-1.712.813-2.378.617-.726 1.34-1.606 2.364-1.376.944.215.743 1.341.845 2.067.586 4.173.768 8.378.733 12.59-.013 1.631-1.319 3.206-2.883 3.638-1.47.406-1.466-.807-1.533-1.61-.205-2.387-.279-4.784-.387-7.178-.03-.636-.003-1.28-.003-1.916h.047l-.003-.004Z",fill:"#1E1919"}));const K=n.intl.formatMessage({id:"61HMIh",defaultMessage:"An image of two hands high five each other"}),V=()=>{const e=w.default.useRef(null),{inRailNav:t}=w.default.useContext(s.UserNotificationsContext),a=s.useFetchNotifications(),{mutate:i}=s.useMarkAsReadMutation(),{mutate:l}=s.useMarkAllAsReadMutation(),[o,c]=w.default.useState(1),[r,u]=w.default.useState([]),[d,f]=w.default.useMemo((()=>{let e=[],t=[];if(a.isSuccess){let{notifications:n}=s.parseGetAllResponse(a.data);n=[...n].sort(s.userNotificationComparator),n.length>0&&(e=n.filter((e=>e.status===s.NotificationStatuses.Unread)),t=n.filter((e=>e.status===s.NotificationStatuses.Read)))}return[e,t]}),[a.isSuccess]),m=e=>{const t=[...r];e.forEach((e=>{t.includes(e.id)||t.push(e.id)})),t.length!==r.length&&u(t)};w.default.useEffect((()=>{(()=>{const e=d.concat(f);s.NotificationLogger.logRender(e,0,s.NotificationLocations.TRAY,t)})()}),[d,f]);const g=t=>{if(e.current){return e.current.scrollHeight-e.current.scrollTop-e.current.offsetHeight<=t}};return a.isLoading?w.default.createElement("div",{className:s.classes$1.loader},w.default.createElement(s.Spinner,null)):w.default.createElement("div",{"data-testid":"notifications-tray-content"},w.default.createElement("div",{className:s.classes$1.eventFeed},w.default.createElement(w.default.Suspense,{fallback:w.default.createElement("div",{className:s.classes$1.loader},w.default.createElement(s.Spinner,null))},0===d.length&&0===f.length&&w.default.createElement("div",{className:s.classes$1.notificationsTrayEmpty},n.intl.formatMessage({id:"NfgkYn",defaultMessage:"You donâ€™t have any notifications yet."})),(d.length>0||f.length>0)&&w.default.createElement("div",{onScroll:()=>{g(10)&&((e=>{const a=d.concat(f).slice(10*e,10*(e+1));s.NotificationLogger.logRender(a,10*e,s.NotificationLocations.TRAY,t)})(o),c(o+1))},onWheel:t=>{var a;const s=-40*t.deltaY;(s<=0&&g(0)||s>=0&&0===(null===(a=e.current)||void 0===a?void 0:a.scrollTop))&&t.preventDefault()}},w.default.createElement("div",{className:s.classes$1.notificationsTraySectionHeader},w.default.createElement(s.Text,{className:s.classes$1.notificationsTraySectionHeaderTitle},n.intl.formatMessage({id:"B7AytW",defaultMessage:"Unread"})),d.length>0&&w.default.createElement(s.Button,{onClick:()=>{const{notifications:e}=s.parseGetAllResponse(a.data),n=e.filter((e=>e.status===s.NotificationStatuses.Unread)).map((e=>e.id)).filter((e=>void 0!==e));l(n),m(d),s.NotificationLogger.logUdcl(s.LoggingObjectTypes.MarkAllAsRead,{actionElement:t?"left_nav":"top_nav"})},variant:"opacity",size:"medium",withIconStart:w.default.createElement(s.UIIcon,{src:s.CheckmarkCircleLine})},n.intl.formatMessage({id:"G4MWO/",defaultMessage:"Mark all as read"}))),w.default.createElement("div",null,d.length>0&&d.map(((e,t)=>e.status===s.NotificationStatuses.Unread?w.default.createElement(H,{key:t,onAcknowledge:()=>(e=>{const{notifications:t}=s.parseGetAllResponse(a.data),n=s.getKey(e),l=t.find((e=>s.getKey(e)===n));i(l||e),m([e])})(e),isAcknowledged:r.includes(e.id),notification:e}):null)),0===d.length&&w.default.createElement("div",{className:s.classes$1.notificationsHighFive},w.default.createElement(W,{altText:K}),w.default.createElement("br",null),w.default.createElement(s.Text,{className:s.classes$1.notificationsHighFiveText},n.intl.formatMessage({id:"E7sKqS",defaultMessage:"Nice - thatâ€˜s all for now."})))),f.length>0&&w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:s.classes$1.sectionHorizontalDivider}),w.default.createElement("div",{className:s.classes$1.notificationsTraySectionHeader},w.default.createElement(s.Text,{className:s.classes$1.notificationsTraySectionHeaderTitle},n.intl.formatMessage({id:"hStDj5",defaultMessage:"Read"}))),w.default.createElement("div",null,f.map(((e,t)=>e.status===s.NotificationStatuses.Read?w.default.createElement(H,{key:t,onAcknowledge:()=>{},isAcknowledged:r.includes(e.id),notification:e}):null))))))))};V.displayName="NotificationsTrayContent";var Y=({altText:e,inverse:t,...a})=>{const{getInverseProps:n}=s.useTheme(),{className:i}=n(),l="dig-Illustration dig-13or4mr1_3-5-3 dig-Illustration-spot"+(t?i+" dig-Illustration--inverse":"");return w.createElement("svg",{role:"presentation",...a,className:l,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w.createElement("title",null,e),w.createElement("path",{d:"M344 358.8c-7.2-2-13.9-3.8-20.7-5.6-2.1 2.9-.3 6.9-2.1 9.9-.2.3-.3 1-.1 1.3 1 2.1-.4 3.7-1 5.6-8.4-5.6-13.2-15.6-19.2-23.6-21.4-23-.3-33.9-13.8-57.1 7-1.8 14.6-3.2 21.9-5.1 17.7 1.4 9 25.1 7.7 36.3 4.9 14.7 19.4 25.1 27.3 38.3Z",fill:"#C8AFF0"}),w.createElement("g",{fill:"currentColor"},w.createElement("path",{d:"M289.7 315.4c-36.5 5.8-68.9 24-103.1 36.5-11.2 4-22.4 7.6-33.7 11.4-1.1.4-2.4.5-2.6 2.5-48.8-40-95.4-80.3-140.1-125 0 2 .9 2.9 1.8 3.8 7 6.8 13.9 13.7 20.9 20.3 22.3 21.2 45 42 68 62.3 13.4 11.4 27.1 22.4 40.8 33.5 2 1.6 4.1 2.4 1.5 5.1-37.7-28.5-73.3-60.2-107.1-93.3-9.3-9.2-18.1-18.9-27.1-28.3-6-8 2.1-8.1 8.1-9.8 9.7-6.4 15.1-19 22.3-28.2 3.8-6.9-2.2-4.6 9.8-8.3 31.5-6.5 56.1-34.1 88.6-36.1 24.2-.1 26.2.3 44.7 15.9-.4-12.8 3.3-23.7 11-33.7 2.9-2.4 8-15.4 11.8-12.7 4.5 3.4 1.4 11.6 6.2 14 2.4.6 4.1 2 5.2 4.5 31.3-6.1 63.7-3.1 95-10.4 2.8-.3 5.2.6 7.5 2.2 11.5 8 23.4 15.3 34.8 23.5 35.3 24 69.2 50.3 105.8 72.2 6.8 3.6 12 9.1 19.1 12.3 3.2 2.3 6.2 4.2 10.1 4.8 3 .8 3.6 1.8 2.7 4.8-1.8 5.8-.5 4.5-6.4 6.1-40.2 10.4-80.7 20-120.7 31.3-18.2 3.5-9.5 8.5-16.3 9.3-8.6 2.9-17.4 6.6-26.3 8.7-5.8-1.1-4.4-7.7-3.3-12.3 1 1.2 1.6 2 2.2 2.8.2-.1.3-.1.5-.2-.7-2.7-1.5-5.5-2.2-8.3 1.1 1.9 2.2 3.9 3.1 5.5-.2-3.8-1.4-6.8-3.4-8.2-.6.8.3 1.9.3 2.8-1.8-1.5-1-3.5-1.5-6 1.9 1.3 3.5 2.3 5.2 3.4.3-6.8-4.1-2.8-5.6-5.7 8.2-2.2 8.1 11 8.2 16.4 3.5-1.1-1.4-11.5-1.3-14.8-.7-4.8-8.4-2-8.7-6.6 12.6-4.3 13.1 10.2 13.4 18.8 4.1-1.7 1.3-12.9.8-16.8 3.7 3.2 1.9 8.5 2.3 12.7 0-4.9 3.1-11.2-1.4-14.8-.3.8-.5 1.5-.8 2.1-12.5-14.5-75.4 9.2-93.8 14.6-11.7 4.6-23.3 9.5-34.6 15-9.1 5.9-22.4 7.3-28.7 16.5.1.1.2.3.3.5 26.1-13.3 89.8-46.4 116.5-43.5-26.3 4.4-51.8 13.7-75.5 25.7 19.7-7.5 39.5-14.8 59.6-21.1 2.9-.3 16.9-5.6 16.8-1.7-19.8 2.4-37.9 11.2-56.8 17-22.8 9.1-46.9 18.1-67.2 31.9.1.2.2.3.3.5 39.7-19.9 80.6-39.2 124.2-48.4 2.6 3.6 2.4 7.5 1.8 11.5-3.4 3.3-10.1 3.2-14.7 4.9-27.9 7.1-55.5 15.8-81.3 28.7-12.9 5.9-26.4 11.1-39.9 14.7-8.4 3.6-32.2-23-40.3-28.3-21.5-18.3-41.8-38-63-56.7-10-9.2-20.5-18-30.3-27.4-3.4-3.8-7.2-4.6-12-2.8 39.8 40 82.2 77.1 125.1 113.6 4.6 2.9 8.5 9.7 13.9 10.2 19.9-5.9 39.5-12.6 58.6-20.9 26.5-12.8 53.6-23.1 82.6-28.6.6 1.9-.1 2.9-1.6 3.7l-.1.4ZM35 245.8c-3.6-4.2-8.3-7.2-11.3-11.9 22.5 17.3 42.4 38.3 65.8 54.6 23.9 18.2 46.2 38.9 70.4 56.5.6-.5.9-1 1.1-1.9-32.9-26.2-66.7-51.3-98.9-78.3-10.2-8.3-19.9-17.2-29.3-26.4-3.7-2.8-7.8-11.1-10.9-3.3 27.1 23.3 53.2 47.5 79.4 71.9 17.6 14.6 35.9 28.4 52.8 43.8 2.4-.8 3.9-1.9 4.7-4.1-41.1-33.9-82.9-66.8-123.8-100.9Zm252.3-75.5c-2.7.3-5.7 1.6-8-.3-4.3-2-13-4-16.4 0-2.7 4.6-8.2 1.1-11 5-4.1 4-10.1 9.7-16.1 6.3-3.2-.7-6.2-1.4-8.2-4.3.7.2 1.4.3 2.1.5.6-4.3-.3-6.1-3.3-7.2.3 2.1.7 4.4 1 6.6-3.5-1.7-.6-6.9-4.6-8.6 1.6-.9-1.6-2.4-1.9-.7-5.5-2.3-9.3-8.9-8.8-15 .6-2.2-2.1-2.5-3.2-3.8 1.5.6 3 1.2 4.8 1.9.1-5.3-7-3.6-6.7-9-.2-2.1-.5-4.3-1.8-6.6-.6 4.8-1.7 9.1 2.1 12.8-5.7-3.2-3.2-8-3.5-13.6-9.1 13.4-20.5 26.6-19.4 43.8-.1 3.6 4.7 4.3 6.9 6.5 10.5 7.3 20.9 14.7 31.4 22.1 37 25.8 72.2 54 110.6 77.8 7.2-22.3 11.2-46.9 31.4-61.6-1-.9-1.8-1.5-2.5-2.2.4 0 .9-.1 1.5-.2-.4-2.7 0-5.7-3-7-2.2-.9-3.9-3.3-6.5-3.2-4.3-.4-6.2-3.1-10.9-.6-3.8-3.7-8.8-7-4.7-12.5.2-.6.7-1.3.6-1.8-.8-2.5.5-4.7 1.3-7.1-3.5-.8-6.1-3.1-9.3-4.6-3.2-1.7-8.9-1.3-9.6-5.7 2.2-4.7-14.7-8-18-10.5-5.1-3.2-8.5 3.9-13.9 2.3-.8-.8-2-.9-2.4.5Zm28.2 105.6c-32.8-22.3-64.9-45.4-97.2-68.4-11.8-7.9-23.2-16.6-35-24.6-9.7-7-19.2-15.4-31.4-17.4-12.5-1.5-25.6-1.5-36.9 4.7-23.2 11.5-45.1 25.8-70.4 32.2 45.8 40.4 90.9 82.5 141.6 116.4 19.1-11.5 39.8-19.8 60.6-27.6 21.9-10.1 44.5-16 68.7-15.3Zm22.9-73.2c3 1.8 4.6 5.2 8.2 3.9 3.2-1.2 5.5 2.3 8.7 1.6 2.7.4 4.7 3.4 7.2 4.4 4 1.8 1.6 7.4 6.1 9.2-18.9 14.7-22.6 27.2-28.4 49.4 9.1-20.9 32.6-21.3 52.3-20.9 22.1-.2 43.9-6 65.6-9.7-47.4-28.7-91.3-62.7-136.9-94.2-5.9-4.4-5.8-4.5-13.1-3.3-29.9 7.1-60.9 4.1-91 8.8-.3 4.6-2.4 8.6 1.9 11.9 1.1 2.3 4.2 1.2 6 2.7 4.6 2.9 8.7 6.3 8.5 12.2 3 .9 5.5 3.6 8.2 1.3 2.5-1.9 5.7-3.5 7.3-6.3 2.1-4.9 8-.8 10.7-5.2 2-2.4 4.6-3.5 7.9-2.7 3.8.6 7.8.6 11.3 2.4 1.7.8 3 1 4.7.2 3.9-2.1 8.6-.3 11.9-3.6 5-3.3 10.1 2.7 15 3.8 5.2 2.6 14.4 3.5 14.9 10.6 7 3.3 15.1 3.5 20.9 8.8-2.6 5.1-5.2 9.8-7.9 14.7ZM29.9 224.1c44.5 38.6 89 77.1 135.4 113.4 1.1-1.6 2-2.8 2.9-4.1-44.6-38.6-93.4-71.9-134.6-114.5-1.2 1.8-2.3 3.4-3.7 5.2Zm132.3 117.3c3.7-3.5-2.4-5.4-4.5-7.5-10.7-8.8-21.5-17.6-32.2-26.5-32.5-27-65.2-53.7-96.5-82.1-1.1 1.7-2.1 3-3 4.5 42.5 40.6 90.4 74.9 136.2 111.6Zm8.7-12.2c-45.8-37.1-90.1-75.8-133.6-115.6-1 1.4-1.9 2.6-2.8 4 42 41.6 89.7 76.3 134.9 114.1.5-.9.9-1.5 1.5-2.5ZM43.3 204.3c-5 .9 20.6 20.3 22.5 23.4 34.6 34 71.2 65.8 109.4 95.7 1.4-1.7 2.6-3.2 3.9-4.9-47.4-35.4-91.8-74.6-135.8-114.2Zm-5.1 8.1c44.1 39.2 87.7 78.8 133.8 115.5.9-1.3 1.6-2.3 2.3-3.2-47.5-35.7-90-77-133.1-117.7-1 1.9-2 3.6-3 5.4Zm315 80.8c44.1-13 88.6-23.7 132.6-36.9-4.8-2.3-10.2 2-15.1 2.5-15.5 4.3-31.4 7.2-47.1 10.5-23.7 6.2-52 6.4-70.4 23.9Zm122.6-41.6c-1.4-1.4-2.5-1.5-3.8-1.4-10.3.8-20.6 1.6-31 2.4-17.4.8-33.5 9-51.1 8-31-1.1-39.3 12.6-49 39.5 1 .3 1.6.6 2.3.8 11.2-27.2 12.9-36.2 44.9-36 29.1-5.7 58.3-9.7 87.7-13.3Zm-139.4 48.1c2.7-.3 2.7-9.5 4.3-12.1 7-24.3 24.4-34.5 49-32.6 26-.8 51.8-5.9 77.5-9.2-3.5-3.3-9.1-.2-13.4-.4-19.7 2.3-39.2 7.6-59.2 7.2-39.3-1.1-50.1 9-58.2 47.1Zm20.5-23.9c16.3-9.1 35.1-6.5 52.8-9.9 20.1-2.7 40.1-6.3 59.8-11.2-23.8 1.5-47.1 6.5-70.6 10-14 4.5-32-2.5-42 11.1Zm-49.1 3.2v-.5c-19 .3-37.1 5.4-54.4 12.9-16.4 6.4-33.5 11.4-48.8 20.3 33-14.6 67.7-25.2 103.2-32.7Zm110.3-24.7c-39.3 4.7-68.1-5.6-78.4 43.8 19.5-54.8 36.5-30.3 78.4-43.8Zm7.3 22.9c0-.2-.1-.4-.1-.6-24.4 7.2-50.6 11.6-73.8 21.1 24.4-4.9 49.3-14.1 73.9-20.5Zm-261.2 68.9c17.4-9.7 36-16.6 53.2-26.5-17.7 6.2-34.4 15.5-51.3 23.7-1 .4-2.3.8-1.9 2.8Zm324.6-86.9c-19.3 5.3-38.5 10.5-57.8 15.7 18.6-1.8 37-9.4 55.5-13.3 1.2-.3 2.4-.4 2.3-2.4Zm-65.9 6.8c-16.3 2.4-32.8 2.8-49 5.9 16.4-1.4 33.4-.2 49-5.9Zm27.3-15.9v.3c6.8-.5 13.7-1 20.8-1.5-2.9-4.2-15.5 1.4-20.8 1.2Zm-132.5 35.6c5.2.8 8.1 3.2 8.8 8.7.4-7.7-1.9-10.1-8.8-8.7Zm-130.6 35.1c-2.6-.1-4.6-.2-6.8-.3-.6 1-1.4 2.3-2.2 3.5.2.1.3.3.4.4 2.8-1.1 5.4-2.2 8.6-3.6Zm163-31.9c-1.2 4.4-5.2 8.9-4.6 13.3 1.3-1.8 4-9.1 4.6-13.3Zm4.7-5.4c3.3-3.7 5.1-5.5 8.9-8.7-4.6 1.4-7.8 4.3-8.9 8.7Zm98.8-23c-3.5-.4-10.5.9-12.8 2.4 4.3-.8 8.6-1.6 12.8-2.4Zm-118.2-75.8c2.5 1.1 5 2.2 7.6 3.3-.7-2.5-4.9-3.4-7.6-3.3ZM190.1 325.3c.1.1.2.3.3.4 2.5-1.2 5-2.5 7.4-3.7-.1-.2-.2-.3-.2-.5-2.6 1.3-5.1 2.6-7.5 3.8ZM320.7 308h-.7c-1.9 3.9 3 4.1.7 0Zm-136.2 20.8c-.1-.2-.2-.4-.2-.5-1 .5-1.9 1-2.9 1.4.1.1.2.3.2.5.9-.5 1.9-.9 2.9-1.4Zm165-26.4c-.1 0-.2-.1-.3-.2-.4.9-1.2 1.3-.3 2.3.2-.9.4-1.5.6-2.1Zm-29.1-23c0 .1-.1.2-.1.3l1.8.6c0-.1.1-.3.1-.4-.5-.2-1.2-.3-1.8-.5Z"}),w.createElement("path",{d:"M289.6 315.5c2.9.8-.6 4.8-2.6 4.7-32.2 10.7-64.1 22-95.7 34.2-10.1 2-40 23.4-45.6 11.4 7 6.6 48.2-17.8 61-20.3 27.3-10.5 55.6-20.1 82.9-30Zm-1.8-144.7c6.4 1.2 14-4.5 19.6 0-3.2.1-6.8-1.2-9.8-.1-2.9 1.9-7.2 2-9.8.1Zm55.6 38.4c2.5.5 5.7-.9 7.3 1.7-2.4-.4-5.8.8-7.3-1.7Z"}),w.createElement("path",{d:"M350.6 210.9c2.6.8 5.6.1 7.3 2.8-2.4-1.1-5.5-.7-7.3-2.8Zm-36.1-36.8c2.3.7 4.8 1.1 6.7 2.8-2.3-.6-4.8-.9-6.7-2.8Zm-6.1-2.1c2.1.7 4.4.6 6.1 2.2-2.1-.5-4.4-.3-6.1-2.2Z"})))};const J=()=>w.createElement("div",null,w.createElement("div",{"data-testid":"error-state-spot",className:s.classes$1.errorStateSpot},w.createElement(Y,null)),w.createElement("div",{className:s.classes$1.errorStateText},w.createElement(s.Text,{"data-testid":"error-state-text"},n.intl.formatMessage({id:"DNJluh",defaultMessage:"Uh oh, weâ€™re unable to load your notifications.{br}Try another time."},{br:w.createElement("br",null)}))));J.displayName="NotificationsTrayErrorState";const X=e=>{const{errorState:t}=e;return w.default.createElement(w.default.Fragment,null,w.default.createElement(s.Box,{className:s.classes$1.notificationsTitle,backgroundColor:"Background Raised",borderBottom:"Solid",borderColor:"Border Subtle"},w.default.createElement(s.Title,{weightVariant:"emphasized",size:"small"},n.intl.formatMessage({id:"dToisu",defaultMessage:"Notifications"}))),w.default.createElement(s.Box,{className:s.classes$1.notificationsDropdown},t?w.default.createElement(J,null):w.default.createElement(V,null)))};X.displayName="NotificationsTray",t.default=X}));
//# sourceMappingURL=c_user_notifications_components_notifications_tray.after-display.js-vfl5_tMhZ.map

//# debugId=69aa07b0-7931-3b6b-8805-b463aa5bf219