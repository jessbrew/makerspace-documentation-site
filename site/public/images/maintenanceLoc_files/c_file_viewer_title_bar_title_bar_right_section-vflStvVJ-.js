!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2c544191-56f7-3de6-add6-0c9408f7f997")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_folder","./c_action_plugins_comment_action_button","./c_extensions_client","./c_admin_registration_source_constants","./c_google_one_tap_google_one_tap_platform","./c_memoize-one","./c_file_viewer_context_migration_context","./c_react-intl_src_components_message","./c_file_viewer_title_bar_title_bar_pass_ui","./c_extensions_data_types","./c_cloud_docs_constants","./c_onboarding_survey_lib_oa_pulsar_campaigns","./c_user_education_user_education_client","./c_pap-events_docsend_view_docsend_hub_entry_button","./c_action_bar_action_bar_strings","./c_integrations_data_store","./c_lodash","./c_action_plugins_conversion_action_conditions","./c_api_v2_routes_folders_info_provider","./e_core_exception","./c_api_v2_routes_password_confirmation_provider","./e_edison","./c_src_sink_index","./c_views_copy_link_mini_modal_after_display_utils","./c_file_viewer_api_navigation","./c_core_data_ui","./c_tagging_data_store","./c_sharing_logger","./c_stormcrow_stormcrow_exposure_logger","./c_react_query_helpers_queries_file_content_metadata","./c_file_viewer_hooks_use_mouse_active","./c_hooks_use_stabilized_callback"],(function(e,t,a,n,i,r,o,s,l,c,u,d,_,f,g,p,m,h,E,v,S,I,w,L,A,b,T,C,R,y,P,N,O,k,B,M){"use strict";function D(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var x=D(a);const V=e=>{const t=new URL(window.location.href);for(const a of e)t.searchParams.delete(a);window.history.replaceState(null,"",t.href)},U="init",F=["edit","verify_email"],W=["save"],G=n.defineMessage({id:"OMdXIO",defaultMessage:"To edit a copy of this file, log in or sign up"});function K(e){return c.imageEditorInitialActionStrings.includes(e)}function z(e){return W.includes(e)}const H=(e,t,a)=>{const n=(e=>e===i.PreviewType.Image||e===i.PreviewType.SsrDoc)(t)?i.LoginOrRegisterKind$1.SHARED_LINK_UNGATED_EDIT:i.LoginOrRegisterKind$1.LOGGED_OUT_EDIT,r=new URL(window.location.href);r.searchParams.set(e.action,"1"),e.initialAction&&r.searchParams.set(U,e.initialAction);const{cleanupGOTLoginContinuation:o}=(c=r.href,l.GoogleOneTapPlatform.updateLoginContUrl(c),{cleanupGOTLoginContinuation:()=>l.GoogleOneTapPlatform.updateLoginContUrl(window.location.href)});var c;const u={mode:i.AuthMode.LOGIN,kind:n,encryptionOptions:a,authDialogPreviousElement:i.AuthDialogPreviousElementTag.EDIT,sharedLinkUrl:r.href,onCancel:o,previewType:t,webSignInTag:"logged_out_unknown"};switch(t){case i.PreviewType.Image:return{...u,signupTag:s.RegistrationSource.IMAGE_EDIT,webSignInTag:s.RegistrationSource.IMAGE_EDIT};case i.PreviewType.SsrDoc:return{...u,signupTag:s.RegistrationSource.PDF_EDIT,webSignInTag:s.RegistrationSource.PDF_EDIT};default:return u}};i.injectInternalStyle("/static/metaserver/static/js/file_viewer/title_bar/shared/login_signup_buttons.module.out-vflVVffhi.css",(e=>"._auth_1gst6_1>:not(:last-child){margin-right:8px}._low-distraction-view_1gst6_5{padding-right:var(--dig-spacing__micro__xlarge)}"));const j=({showAuthModal:e,activePreviewFile:t,className:a})=>{var r;const o=n.useIntl(),s=o.formatMessage({id:"VbukJp",defaultMessage:"Log in"}),l=t.sharedLinkInfo&&(null===(r=t.sharePermission)||void 0===r?void 0:r.isSharedFolder)?"outofband_folder_share":"outofband_file_share";return x.createElement("div",{className:i.cx("_auth_1gst6_1",a)},x.createElement(i.Button,{onClick:()=>e({mode:i.AuthMode.LOGIN,kind:i.LoginOrRegisterKind$1.SIDEBAR,webSignInTag:l,loggingExtra:{signup_source:"nav_signin_cta"},authDialogPreviousElement:i.AuthDialogPreviousElementTag.LOG_IN,sharedLinkInfo:t.sharedLinkInfo}),"aria-label":o.formatMessage({id:"Cg3xuN",defaultMessage:"Button to trigger login dialog"}),variant:"opacity",size:"large"},s),x.createElement(i.Button,{className:"previews_campaign_slot_sign_up",onClick:()=>e({mode:i.AuthMode.REGISTER,kind:i.LoginOrRegisterKind$1.SIDEBAR,webSignInTag:l,loggingExtra:{signup_source:"nav_signup_cta"},authDialogPreviousElement:i.AuthDialogPreviousElementTag.SIGN_UP,sharedLinkInfo:t.sharedLinkInfo}),"aria-label":o.formatMessage({id:"B9J0l9",defaultMessage:"Button to trigger sign up dialog"}),variant:"primary",size:"large"},o.formatMessage({id:"5KEf7W",defaultMessage:"Sign up"})))};j.displayName="LoginSignupButtons";const q=({showAuthModal:e,activePreviewFile:t,className:a})=>{var r;const o=n.useIntl(),s=t.sharedLinkInfo&&(null===(r=t.sharePermission)||void 0===r?void 0:r.isSharedFolder)?"outofband_folder_share":"outofband_file_share";return x.createElement("div",{className:"_low-distraction-view_1gst6_5"},x.createElement(d.FormattedMessage,{id:"Y1st2T",defaultMessage:"<loginLink>Log in</loginLink> or <signupLink>Sign up</signupLink>",values:{loginLink:(...a)=>x.createElement(i.Button,{onClick:()=>e({mode:i.AuthMode.LOGIN,kind:i.LoginOrRegisterKind$1.SIDEBAR,webSignInTag:s,loggingExtra:{signup_source:"nav_signin_cta"},authDialogPreviousElement:i.AuthDialogPreviousElementTag.LOG_IN,sharedLinkInfo:t.sharedLinkInfo}),"aria-label":o.formatMessage({id:"Cg3xuN",defaultMessage:"Button to trigger login dialog"}),variant:"transparent",size:"medium",style:{marginRight:"4px"}},a),signupLink:(...a)=>x.createElement(i.Button,{className:"previews_campaign_slot_sign_up",onClick:()=>e({mode:i.AuthMode.REGISTER,kind:i.LoginOrRegisterKind$1.SIDEBAR,webSignInTag:s,loggingExtra:{signup_source:"nav_signup_cta"},authDialogPreviousElement:i.AuthDialogPreviousElementTag.SIGN_UP,sharedLinkInfo:t.sharedLinkInfo}),"aria-label":o.formatMessage({id:"B9J0l9",defaultMessage:"Button to trigger sign up dialog"}),variant:"transparent",size:"medium",style:{marginLeft:"4px"}},a)}}))};q.displayName="LowDistractionLoginSignupButtons";const Y=()=>{const{titleBarPassUi:e}=i.useFileViewerSubRegionContext();return x.default.useMemo((()=>{return e?(t=e,e=>x.default.createElement(x.default.Suspense,{fallback:null},x.default.createElement(t,{...e}))):_.TitleBarPassUi;var t}),[e])};var Q;!function(e){e[e.NO_TOOLTIP=0]="NO_TOOLTIP",e[e.BIG_ONBOARDING_TOOLTIP=1]="BIG_ONBOARDING_TOOLTIP",e[e.SMALL_TOOLTIP=2]="SMALL_TOOLTIP"}(Q||(Q={}));class ${constructor(e,t){this.start=()=>{this.isRunning=!0;const e=this.thunk,t=this.fps;let a=-1,n=-1;const i=1e3/t,r=(e,t)=>{const a=Date.now(),o=a-(t||0);return o>i&&(e(),t=a-o%i),n=requestAnimationFrame((()=>r(e,t))),n};a=requestAnimationFrame((()=>r(e))),this.cleanup=()=>{cancelAnimationFrame(a),cancelAnimationFrame(n)}},this.stop=()=>{this.isRunning=!1,this.cleanup()},this.thunk=e,this.fps=t,this.cleanup=()=>{},this.isRunning=!1}}const J={bottom:0,height:0,left:0,right:0,top:-1e3,width:0};class X extends x.default.Component{constructor(e){super(e),this.isActive=!1,this.container=x.default.createRef()}activateElementObserver(){this.isActive=!0,this.updateRect(!0),this.startRectUpdateLoop()}deactivateElementObserver(){this.stopRectUpdateLoop(),this.isActive=!1,this.activeRect=J}componentDidMount(){m.UEClient.on(p.UEEffectChannel,this.handleUpdate,this),m.UEClient.send(p.UEEffectChannel,{type:p.UEEffectEventType.EffectReady,containerName:this.props.containerName,elementName:this.props.name}),m.UEClient.sendEvent(this.props.containerName,`${this.props.name}.componentDidMount`,{})}componentDidUpdate(){this.updateRect(!0)}shouldUpdateActiveRect(e){if(!this.activeRect)return!0;return!(this.activeRect.top===e.top&&this.activeRect.bottom===e.bottom&&this.activeRect.left===e.left&&this.activeRect.right===e.right&&this.activeRect.width===e.width&&this.activeRect.height===e.height)}updateRect(e){if(this.isActive&&this.container&&this.container.current instanceof Element){const t=this.container.current.getBoundingClientRect();t&&(e||this.shouldUpdateActiveRect(t))&&(this.activeRect=t,this.notifyRectUpdate())}}notifyRectUpdate(){this.isActive&&m.UEClient.send(p.UEEffectChannel,{type:p.UEEffectEventType.UpdateRect,containerName:this.props.containerName,elementName:this.props.name,rect:this.activeRect})}componentWillUnmount(){this.isActive&&(this.activeRect={...J},this.notifyRectUpdate(),this.deactivateElementObserver()),m.UEClient.removeListener(p.UEEffectChannel,this.handleUpdate,this)}startRectUpdateLoop(){this.sizeObserver||(this.sizeObserver=new $(this.updateRect.bind(this),X.RectUpdateFrequencyPerSec)),this.sizeObserver.isRunning||this.sizeObserver.start()}stopRectUpdateLoop(){this.sizeObserver&&this.sizeObserver.stop()}handleUpdate(e){e.containerName===this.props.containerName&&e.elementName===this.props.name&&(e.type===p.UEEffectEventType.Activate?this.activateElementObserver():e.type===p.UEEffectEventType.Deactivate&&this.deactivateElementObserver())}render(){const e="ue-effect-container uee-"+this.props.containerName+"-"+this.props.name;return this.props.useSpan?x.default.createElement("span",{ref:this.container,className:e},this.props.children):x.default.createElement("div",{ref:this.container,className:e},this.props.children)}}function Z(e){if(void 0!==e)switch(e){case i.ActionSurfaceLogValue.OVERFLOW_MENU:return"action_bar_overflow_menu";case i.ActionSurfaceLogValue.RIGHT_SIDEBAR:return"right_rail_share_menu";case i.ActionSurfaceLogValue.CENTER_PANE:return"center_pane";case i.ActionSurfaceLogValue.TOP_NAVIGATION:return"top_navigation";case i.ActionSurfaceLogValue.ACTION_BAR:return"action_bar";case i.ActionSurfaceLogValue.INLINE_ACTION_BAR:return"content_overflow_menu";case i.ActionSurfaceLogValue.FEATURE_GROWTH:return"feature_growth";case i.ActionSurfaceLogValue.RIGHT_CLICK_MENU:return"content_right_click";case i.ActionSurfaceLogValue.IN_FOLDER_ACTIVATION:return"in_folder_activation";case i.ActionSurfaceLogValue.CONTENT_TILE_ACTION_MENU:return"content_tile_action_menu";case i.ActionSurfaceLogValue.CONTENT_SUGGESTIONS_MODULE:return"content_suggestions_module";case i.ActionSurfaceLogValue.CONTENT_TILE:return"content_tile";case i.ActionSurfaceLogValue.CONTENT_SUGGESTIONS:return"content_suggestions_menu";case i.ActionSurfaceLogValue.PREVIEW_TITLEBAR:return"preview_titlebar";case i.ActionSurfaceLogValue.GLOBAL_CREATE:return"global_create";case i.ActionSurfaceLogValue.FILE_UPLOADER_ACTIONS:return"file_uploader_actions";case i.ActionSurfaceLogValue.CONTEXTUAL_RIBBON:return"contextual_ribbon";case i.ActionSurfaceLogValue.FOLDER_SETTINGS_MENU:return"folder_settings_menu";case i.ActionSurfaceLogValue.CONTENT_OVERFLOW_MENU:return"content_overflow_menu";case i.ActionSurfaceLogValue.QUICK_VIEW:return"quick_view";case i.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE:return"quick_view_folder_content_tile";case i.ActionSurfaceLogValue.QUICK_VIEW_FOLDER_CONTENT_TILE_ACTION_MENU:return"quick_view_folder_content_tile_action_menu";case i.ActionSurfaceLogValue.RELATED_FILES:return"related_files";case i.ActionSurfaceLogValue.QUICK_VIEW_TOOLBAR:return"quick_view_toolbar";case i.ActionSurfaceLogValue.COMMENTS_SIDEBAR:return"comments_sidebar";default:!function(e){throw new Error(`Unexpected value: ${e}`)}(e)}}X.displayName="UserEducationEffect",X.RectUpdateFrequencyPerSec=15;const ee="share-me-24-split-share-button-refocus-on-close",te=x.default.lazy((async()=>{const{PopoverItems:t}=await new Promise((function(t,a){e(["./c_extensions_split_share_button.after-display"],t,a)}));return{default:t}}));te.displayName="LazyPopoverItems";const ae=()=>{const e=n.intl.formatMessage({id:"DsCb47",defaultMessage:"Loading modal"});return x.default.createElement(i.Menu.Segment,null,x.default.createElement(i.Menu.Row,null,x.default.createElement(i.Spinner,{key:"spinner",size:"small","aria-valuetext":e})))};v.prefetchIntegrationsData();const ne=i.requireCssWithComponent((t=>{const a={isVisible:!0,disabled:!1,shareButtonLabel:n.intl.formatMessage({id:"TFeNOo",defaultMessage:"Share"}),triggerType:f.TriggerType.PrimaryButton,variant:"opacity"},{user:r,files:s,context:l,isVisible:c,disabled:u,shareButtonLabel:d,triggerType:_,shouldUsePortalPopover:m,showLeftDigIcon:v,variant:I,renderMenuOnly:w,onShowShare:L,logShareButtonClick:A,onDropdownOpen:b,onDropdownClose:T,actionSurface:C,isLoading:R,size:y,showEduTooltip:P,previewsLogUserAction:N,currentFolderOnly:O,fileActionLoggingFn:k,removeSplitDropdown:B}={...a,...t},M=s[0],D=s.map((e=>({...e,bytes:0}))),V=1===s.length,U=i.useAppActions().data,F=U.actions,W=o.getShareActionsForFiles(F,D),G=o.parseActionsForUserResult(U).featureFlags,K=x.default.useRef(null),z=x.default.createRef(),H=x.default.createRef(),j=x.default.useMemo((()=>o.createTelemetryClient({component:"split-share-btn",...l})),[l]),q=x.default.useMemo((()=>{if(l)return j.session({ext:o.getPiiSafeExtension(M?"."+i.file_extension(i.filename(M.fq_path)):"")})}),[l,j,M]),Y=B?i.cx({"primary-action-menu__button":_===f.TriggerType.SidebarPrimaryButton,[p.OAPulsarPrimaryButton]:_===f.TriggerType.ContextualRibbonPrimaryButton}):i.cx("extensions-split-share__share-button",{"primary-action-menu__button":_===f.TriggerType.SidebarPrimaryButton,[p.OAPulsarPrimaryButton]:_===f.TriggerType.ContextualRibbonPrimaryButton}),$=x.default.useMemo((()=>V&&"DEEP_INTEGRATION"===(null==G?void 0:G.hellosignDeepIntegration)&&g.isHellosignFileByExtension(o.getFileExt({...M,bytes:0}))&&!h.is_supported_mobile_browser()),[G,V,M]),[J,ne]=x.default.useState(Q.NO_TOOLTIP),ie=i.useAfterDisplayModule({importer:async()=>({default:await new Promise((function(t,a){e(["./c_extensions_split_share_button.after-display"],t,a)}))})});x.default.useEffect((()=>{P&&G&&(async(e,t,a,n)=>{ie&&"split_share_edu"===await ie.getTooltipState(e,t,a,n)&&ne(Q.BIG_ONBOARDING_TOOLTIP)})(r,M,W,G)}),[ie]);const re=x.default.useCallback((e=>{e.preventDefault(),L(K),null==k||k("share"),A&&A(w?i.ActionSourceValue.OVERFLOW_MENU:i.ActionSourceValue.SPLIT_SHARE),null==N||N(i.UserAction.Share,i.UserActionContext.PreviewTopNav),q&&q.event("click_share",{trigger_type:_}),e.stopPropagation()}),[L,A,q,w,_,N]),oe=x.default.useCallback((()=>{q&&q.event("share_hover",{trigger_type:_})}),[q,_]),se=x.default.useCallback((()=>{q&&q.event("popover_trigger_hover",{trigger_type:_})}),[q,_]),le=i.useAfterDisplayPassthroughCallback({importer:async()=>{const{markTooltipViewed:t}=await new Promise((function(t,a){e(["./c_extensions_apis.after-display"],t,a)}));return{default:{fn:t}}}}),ce=x.default.useCallback((e=>{if(e.preventDefault(),J===Q.BIG_ONBOARDING_TOOLTIP&&(le.fn(r,"split_share_edu"),ne(Q.NO_TOOLTIP)),e.stopPropagation(),"digClickOutsideisActiveLayer"===e.target.dataset.testid&&"click"===e.type){const e=new Event("click");document.dispatchEvent(e)}}),[J,le,r]),ue=x.default.useCallback((({isOpen:e})=>{e&&b?b():!e&&T&&T(),q&&q.event(e?"open_popover":"close_popover",{trigger_type:_}),C===i.ActionSurfaceLogValue.PREVIEW_TITLEBAR&&e?null==N||N(i.UserAction.ShareMenu,i.UserActionContext.PreviewTopNav):i.UDCL.logEvent({class:"previews",action:"select",object:"share_menu",properties:{actionSurface:"browse_screen",actionElement:Z(C)}})}),[C,q,T,b,_,N]),de={"aria-label":d,className:Y,onClick:re,tabIndex:c?void 0:-1,onMouseEnter:oe},_e=e=>({className:i.cx("extensions-split-share-menu__trigger"),tabIndex:c?void 0:-1,onMouseEnter:se,"aria-label":n.intl.formatMessage({id:"5MpLpV",defaultMessage:"Expand share menu"}),"data-testid":"share-menu-dropdown",...e}),fe=_===f.TriggerType.ContextualRibbonPrimaryButton;return w?x.default.createElement(x.default.Suspense,{fallback:x.default.createElement(ae,null)},x.default.createElement(te,{...t,currentSession:q})):x.default.createElement("div",{className:i.cx(f.classes.buttonWrapper,"extensions-split-share-btn",{[f.classes.invisible]:!c,"hellosign-available":$,[f.classes.shareFakeSplitButton]:!S.isEmpty(W),[f.classes.shareFakeSplitButtonSingleFile]:V,[p.OAPulsarAction.SHARE_DO]:fe,[p.OAPulsarAction.UNIVERSAL_PATHWAY_SHARE]:fe}),ref:z},V&&x.default.createElement(i.Button,{...de,withIconLeft:v&&x.default.createElement(i.UIIcon,{src:i.ShareArrowLine,className:"extensions-split-share--icon"}),variant:I,"data-testid":"share-button",disabled:u||R,size:y,id:ee,ref:K},R?x.default.createElement(i.Spinner,{size:"small","aria-valuetext":d}):x.default.createElement(X,{containerName:"SplitShareButton",name:"ShareButtonLabel",useSpan:!0},O?n.intl.formatMessage(E.SHARE_FOLDER_ACTION_STRING):_===f.TriggerType.ContextualRibbonPrimaryButton||_===f.TriggerType.SidebarPrimaryButton?n.intl.formatMessage(E.SHARE_SELECTED_ACTION_STRING):d)),B?null:x.default.createElement(i.Menu.Wrapper,{className:i.cx("extensions-split-share__popover",{"hellosign-available-dropdown":$,[f.classes.unportaledMenu]:!m,"down-arrow-share-button-prompt-select":!0}),onClick:ce,onDoubleClick:ce,onSelection:e=>{e.handler()},onToggle:ue,closeOnSelection:!0,isPortaled:m,"data-tooltip":"split-share-menu",ref:H},(({getContentProps:e,getTriggerProps:a})=>x.default.createElement(x.default.Fragment,null,V?x.default.createElement(i.Button,{..._e(a()),variant:I,disabled:u,withDropdownIcon:!0,_hasSquaredSize:!0,size:y}):x.default.createElement(i.Button,{disabled:u,..._e(a()),withIconLeft:x.default.createElement(i.UIIcon,{src:i.ShareArrowLine,className:"extensions-split-share--icon"}),variant:I,withDropdownIcon:!0,size:y},n.intl.formatMessage({id:"DHK0zq",defaultMessage:"Share all selected"})),x.default.createElement(i.Menu.Content,{placement:"bottom-end",className:"rc-action-bar-submenu-content",...e()},x.default.createElement(x.default.Suspense,{fallback:x.default.createElement(ae,null)},x.default.createElement(te,{...t,currentSession:q,menuTriggerRef:H})))))))}),["/static/metaserver/static/css/app_actions/index-vflJuFDy7.css"]);i.injectInternalStyle("/static/metaserver/static/js/previews/ui/sharing_plugin/copy_link_button.module.out-vflsd2dqf.css",(e=>"._copy-link-button_1dhjp_1{padding:0 var(--dig-spacing__micro__small)}._copy-link-button-container_1dhjp_5{align-self:center}._simple-copy-link-button-success_1dhjp_9{color:var(--dig-color__text__subtle)}._copy_link_icon_only_1dhjp_13{width:40px}._copy-link-button-bmus_1dhjp_17{padding:0}._copy-link-button-bmus_1dhjp_17 span span{margin-right:0}"));const ie="_copy-link-button_1dhjp_1",re="_copy-link-button-container_1dhjp_5",oe="_simple-copy-link-button-success_1dhjp_9",se=n.intl.formatMessage({id:"Kb7u3s",defaultMessage:"Copy link"}),le=n.intl.formatMessage({id:"DsCb47",defaultMessage:"Loading modal"}),ce=n.intl.formatMessage({id:"Vxze7Q",defaultMessage:"Share"}),ue=n.intl.formatMessage({id:"FYZVZV",defaultMessage:"Link Copied!"}),de=n.intl.formatMessage({id:"t0CNN+",defaultMessage:"Copied!"}),_e=({user:e,previewSurface:t,fileId:n,filePath:r,file:o,anchorRef:s,showSimpleCopyLinkButton:l,enableWebSharing:c})=>{const{logUserAction:u}=i.useFileViewerContext(),d=t===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW,_="ON"===i.useExperimentVariant("pro_sharing_presentation_links").variant,f=!!e;let g=d?se:f?void 0:ce,p=f?x.default.createElement(i.UIIcon,{src:i.LinkLine}):x.default.createElement(i.UIIcon,{src:i.ShareArrowLine});c&&(g=void 0,p=x.default.createElement(i.UIIcon,{src:i.LinkLine}));const[m,E]=a.useState(g),[v,S]=a.useState(p),[I,w]=a.useState(!1);a.useEffect((()=>{if(I){const e=setTimeout((()=>{E(g),S(p),w(!1)}),3e3);return()=>{clearTimeout(e)}}return()=>{}}),[I]);const L=x.default.useCallback((()=>{const t=i.vendSenderTrackey(),a=i.appendTrackeyToSharedLinkAndSortParams(window.location.href,t);i.logPAPCopySharedLinkEvent({eventState:"start",actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,fileIdOrPath:n,hasCachedLink:!0,url:a}),u(i.UserAction.CopyLink,i.UserActionContext.PreviewTopNav),i.copyToClipboard(a),w(!0),E(f||d?de:ue),S(x.default.createElement(i.UIIcon,{src:i.CheckmarkCircleLine}));const o=h.get_browser_info();i.logPAPCopySharedLinkEvent({eventState:"success",actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,requestedAccessLevel:"viewer",fileIdOrPath:n,hasCachedLink:!0,url:a});const s={file_id:n,fq_path:r,browser:o.browser,browser_version:o.version,sender_trackey:t,sharing_view_type:d?"focused":"basic_view"};e?i.ShareTibEventLogger.log(e.id,i.TiburonEventName.CopySharedLink,i.SHARE_ACTION_ORIGIN_TYPE.SIMPLE_COPY_LINK_FILE_PREVIEW,s):i.ShareTibEventLogger.log_unauth(i.TiburonEventName.CopySharedLink,i.SHARE_ACTION_ORIGIN_TYPE.SIMPLE_COPY_LINK_FILE_PREVIEW,s)}),[n,r,d,u,f,e]),A=C.useShowCopyLinkMiniModalCallback(),b=x.default.useCallback((()=>{if(!f)return;u(i.UserAction.CopyLink,i.UserActionContext.PreviewTopNav);const t={browseFile:o,user:e,filePath:n,setIsCreatingSharedLink:()=>{},anchorRef:s,userActionSurfaceLogValue:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,zIndexOverride:500,yOffsetDistance:8,isLowDistractionViewEnabled:_};A.fn(t)}),[f,e,u,o,n,s,_,A]);if(c)return I?x.default.createElement(i.Button,{variant:"borderless",size:"large",onClick:L,"aria-label":se,"data-testid":"copy-link-button",withIconStart:x.default.createElement(i.UIIcon,{src:i.CheckmarkCircleLine}),className:i.cx("_copy-link-button-bmus_1dhjp_17",{[oe]:I})},x.default.createElement(i.Text,{className:i.cx({[oe]:I}),style:{fontWeight:"500",fontSize:"14px",lineHeight:"18px"}},m)):x.default.createElement(i.Tooltip,{title:se},x.default.createElement(i.IconButton,{variant:"borderless",size:"large",onClick:L,"aria-label":se,"data-testid":"copy-link-button",className:i.cx(ie)},x.default.createElement(i.UIIcon,{src:i.LinkLine})));const T=x.default.createElement(i.Tooltip,{title:se},x.default.createElement(i.IconButton,{className:ie,variant:"borderless",size:"large",onClick:b,"aria-label":se,"data-testid":"copy-link-button",disabled:A.status===i.MafLoadAfterDisplayStatus.Loading},A.status===i.MafLoadAfterDisplayStatus.Loading?x.default.createElement(i.Spinner,{size:"small","aria-valuetext":le}):x.default.createElement(i.UIIcon,{src:i.LinkLine}))),R=x.default.createElement("div",{className:re},x.default.createElement(i.Tooltip,{title:void 0===m?se:m},x.default.createElement(i.Button,{variant:f&&!I?"borderless":"transparent",size:"large",onClick:L,"aria-label":se,"data-testid":"copy-link-button",withIconStart:v,className:i.cx({[oe]:I,[ie]:!(f&&!I),_copy_link_icon_only_1dhjp_13:f&&!I})},x.default.createElement(i.Text,{className:i.cx({[oe]:I}),style:{fontWeight:"500",fontSize:"14px",lineHeight:"18px"}},m)))),y=I?R:x.default.createElement(i.Button,{variant:"primary",size:"large",onClick:L,"data-testid":"low-distraction-copy-link-button"},m);return d?y:!o&&l?R:T};_e.displayName="RedesignedCopyLinkButton";const fe=n.intl.formatMessage({id:"WJB9Vr",defaultMessage:"Share to…"}),ge=({user:e,previewSurface:t,fileId:a,filePath:n,fileName:r})=>{const{logUserAction:o}=i.useFileViewerContext(),s=t===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW,l=x.default.useCallback((async()=>{const t=i.vendSenderTrackey(),l=(e=>{const t=w.URI.parse(e);return t.updateQuery({bmus:"1"}),t.toString(i.sortRighteousLinkParams)})(i.appendTrackeyToSharedLinkAndSortParams(window.location.href,t)),c={title:document.title||r,url:l};i.logPAPWebShareSharedLinkEvent({eventState:"start",actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,fileIdOrPath:a,hasCachedLink:!0,url:l}),o(i.UserAction.WebShare,i.UserActionContext.PreviewTopNav);try{if(!(navigator.canShare&&navigator.canShare(c)&&navigator.share))throw new Error("Web Share API not supported");await navigator.share(c),i.logPAPWebShareSharedLinkEvent({eventState:"success",actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,requestedAccessLevel:"viewer",fileIdOrPath:a,hasCachedLink:!0,url:l})}catch(e){i.logPAPWebShareSharedLinkEvent({eventState:"failed",actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR,requestedAccessLevel:"viewer",fileIdOrPath:a,hasCachedLink:!0,url:l,exception:i.CopyLinkException.FAILED_WEB_SHARE})}const u=h.get_browser_info(),d={file_id:a,fq_path:n,browser:u.browser,browser_version:u.version,sender_trackey:t,sharing_view_type:s?"focused":"basic_view"};e?i.ShareTibEventLogger.log(e.id,i.TiburonEventName.ShareLinkViaWebShare,i.SHARE_ACTION_ORIGIN_TYPE.WEB_SHARE_FILE_PREVIEW,d):i.ShareTibEventLogger.log_unauth(i.TiburonEventName.ShareLinkViaWebShare,i.SHARE_ACTION_ORIGIN_TYPE.WEB_SHARE_FILE_PREVIEW,d)}),[a,n,r,s,o,e]),c=x.default.createElement(i.Button,{variant:"primary",size:"large",onClick:l,"data-testid":"low-distraction-web-share-button"},fe);return s?c:x.default.createElement("div",{className:re},x.default.createElement(i.Tooltip,{title:fe},x.default.createElement(i.Button,{variant:"transparent",size:"large",onClick:l,"aria-label":fe,"data-testid":"web-share-button",withIconStart:x.default.createElement(i.UIIcon,{src:i.ShareArrowLine}),className:ie,tabIndex:0},x.default.createElement(i.Text,{style:{fontWeight:"500",fontSize:"14px",lineHeight:"18px"}},fe))))};ge.displayName="WebShareButton";const pe=n.defineMessage({id:"VzQ1nj",defaultMessage:"Ask the owner of this file for permission to share it with others"}),me=n.defineMessage({id:"JDi0M8",defaultMessage:"Share"}),he=()=>{const e=n.useIntl(),t=e.formatMessage(me),a=e.formatMessage(pe),r=x.default.createElement(i.UIIcon,{src:i.ShareArrowLine});return x.default.createElement(i.Tooltip,{title:a,placement:"left"},x.default.createElement("span",{className:f.disabledShareButton,tabIndex:0},x.default.createElement(i.SplitButton,{variant:"primary",size:"large",disabled:!0,renderMenu:({buttonProps:e})=>x.default.createElement(i.Menu.Wrapper,null,(({getTriggerProps:t,getContentProps:a})=>x.default.createElement(x.default.Fragment,null,x.default.createElement(i.Button,{"aria-label":"Show options",...e,...t(),disabled:!0}),x.default.createElement(i.Menu.Content,{...a(),placement:"bottom-end"}))))},r,t)))};he.displayName="DisabledShareButton";const Ee=t=>{const{previewSurface:a,activeFile:n,user:r}=t,o=x.default.useRef(null);v.usePrefetchIntegrationsData();const{logUserAction:s}=i.useFileViewerContext(),l=a===i.SDKPreviewSurface.SHARED_CONTENT_LINK||a===i.SDKPreviewSurface.SHARED_LINK||a===i.SDKPreviewSurface.SHARED_COLLECTION||a===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW||a===i.SDKPreviewSurface.INBAND_SHARE,c=i.isSharedFile(n),u=i.isEncryptedFile(n),d=a===i.SDKPreviewSurface.BROWSE&&r&&i.isBrowseFile(n),_=a===i.SDKPreviewSurface.STANDALONE_PREVIEW&&r&&i.isBrowseFile(n),g=i.useExperimentVariant("sm24_progressive_inband_m2").variant,p=g?["V1","V2","V3","V4"].includes(g):void 0,m="CONTROL"===g,E="web"===i.getExtension$1(n),S=(null==r?void 0:r.is_team)&&!r.is_cdm_member&&!r.is_tmr_member,w=g&&((p||m)&&d||"V4"===g&&_)&&r&&r.is_email_verified&&!E&&!S,L=y.useCurrentPageCount(),A=N.useEmitter(),b=a===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW||a===i.SDKPreviewSurface.SHARED_LINK||a===i.SDKPreviewSurface.SHARED_COLLECTION||a===i.SDKPreviewSurface.SHARED_CONTENT_LINK&&i.rlKeyExists(),T=i.useAfterDisplayPassthroughCallback({importer:async()=>new Promise((function(t,a){e(["./c_integrations_hellosign_deep_integration_util.after-display"],t,a)})).then((({openSendForSignatureOnPreviews:e})=>({default:{fn:e}})))}),C=i.useAfterDisplayModule({importer:async()=>({default:await new Promise((function(t,a){e(["./c_shareme24_browse_integration_index.after-display"],t,a)}))})}),k=R.useSetActiveEditorCallback(),B=x.default.useCallback((async(e,t,n)=>await T.fn(e,k,a,r,L,t,n)),[T,k,a,r,L]),M=i.useAfterDisplayPassthroughCallback({importer:()=>new Promise((function(t,a){e(["./c_file_viewer_common_share_helpers.after-display"],t,a)})).then((e=>({default:{fn:e.share}})))}),[D,V]=x.default.useState(!1),[U,F]=x.default.useState(""),W=x.default.useMemo((()=>({origin:l?i.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE:i.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,flexibleSharingEntrypoint:g})),[l]),G=x.default.useCallback((()=>{if(r){if(w){i.logExposure({feature:"sm24_progressive_inband_m2",variant:g}),O.logVariantExposure("sm24_progressive_inband_m2",g);const e=Math.random().toString();if(A.select(N.CLICK_SHARE_BUTTON_ON_FILE_PREVIEWS).emit({variant:g,file:n,sessionId:e,isSm24On:p}),p)return F(e),void V(!0)}M.fn(n,r,null,W)}}),[n,r,W,M]),K=x.default.useMemo((()=>({...n,icon:i.isBrowseFile(n)?n.icon:"",fq_path:i.isBrowseFile(n)?n.fq_path:"",is_cloud_doc:I.isCloudDoc(n),type:I.getType(n)})),[n]),z=(h.safari||h.edge||h.windows&&h.chrome)&&!!(null===navigator||void 0===navigator?void 0:navigator.share)&&!!(null===navigator||void 0===navigator?void 0:navigator.canShare)&&!r&&!u&&b;x.default.useEffect((()=>{(()=>{const e=new URL(window.location.href);e.searchParams.has("bmus")&&(e.searchParams.delete("bmus"),window.history.replaceState(window.history.state,"",e))})()}),[]);const H=!u,j=!l&&!u,q=c&&i.isPolluxDesktopSurface(a);return a===i.SDKPreviewSurface.VERSION_HISTORY?null:x.default.createElement(x.default.Fragment,null,x.default.createElement("div",{className:i.cx(f.shareActions,{[f.shareActionsBmus]:z}),ref:o},H&&!b&&d&&x.default.createElement(Se,{showShareButton:j,modalRef:o,showSimpleCopyLinkButton:!1,...t}),H&&!b&&!d&&x.default.createElement(ve,{showShareButton:j,modalRef:o,isSharing:c,...t}),H&&b&&!d&&(z?x.default.createElement(x.default.Fragment,null,x.default.createElement(Se,{showShareButton:j,modalRef:o,showSimpleCopyLinkButton:!0,enableWebSharing:z,...t}),x.default.createElement(Ie,{showShareButton:j,...t})):x.default.createElement(Se,{showShareButton:j,modalRef:o,showSimpleCopyLinkButton:!0,...t})),j&&r&&!q&&x.default.createElement(ne,{files:[K],user:r,variant:"primary",onShowShare:G,previewsLogUserAction:s,onSendForSignature:B,size:"large",isLoading:T.status===i.MafLoadAfterDisplayStatus.Loading||M.status===i.MafLoadAfterDisplayStatus.Loading,actionSurface:i.ActionSurfaceLogValue.PREVIEW_TITLEBAR})),w&&D&&C&&null!==o.current&&x.default.createElement(i.Provider,{store:P.getStoreForBrowse()},x.default.createElement(C.ShareMe24Browse,{fileOrFolder:n,user:r,shareModalExtras:W,modalRef:o,isOpen:D,onRequestClose:()=>{V(!1);const e=document.getElementById(ee);null==e||e.focus()},onInbandShareCompleted:()=>V(!1),actionSurface:"previews",actionElement:"split_share_menu",progressiveInbandVariant:null!=g?g:"OFF",sessionId:U,onFallback:()=>{V(!1),M.fn(n,r,null,W)},onActionClicked:()=>V(!1),overlayPlacement:"bottom-end"})))};Ee.displayName="RedesignedShareButton";const ve=e=>{var t;const a=i.sharingMetadataAlphaPackage.useQuery({apiArg:{file:e.activeFile.file_id}}),n=(null===(t=null==a?void 0:a.data)||void 0===t?void 0:t.apiData)?i.fileMetadataApiToRecord(a.data.apiData):void 0,r=n&&[i.ACCESS_LEVEL.WRITER,i.ACCESS_LEVEL.OWNER].includes(n.access_type);return e.isSharing&&!r&&n?x.default.createElement(he,null):r?x.default.createElement(Se,{...e}):null};ve.displayName="CopyLinkButtonMetadataWrapper";const Se=({activeFile:e,user:t,showShareButton:a,modalRef:n,showSimpleCopyLinkButton:r,previewSurface:o,enableWebSharing:s})=>x.default.createElement("div",{className:i.cx(f.shareButtonContainer,{[f.lowDistractionView]:o===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW})},x.default.createElement(_e,{file:i.isBrowseFile(e)?e:void 0,fileId:e.file_id,user:t,variant:a?"opacity":"primary",anchorRef:n,showSimpleCopyLinkButton:r,previewSurface:o,enableWebSharing:s}));Se.displayName="CopyLinkButtonComponent";const Ie=({activeFile:e,user:t,previewSurface:a,showShareButton:n})=>x.default.createElement("div",{className:i.cx(f.shareButtonContainer,{[f.lowDistractionView]:a===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW})},x.default.createElement(ge,{file:i.isBrowseFile(e)?e:void 0,fileId:e.file_id,user:t,variant:n?"opacity":"primary",previewSurface:a}));Ie.displayName="WebShareButtonComponent";const we=n.defineMessage({id:"f9nEyK",defaultMessage:"Unsaved changes"}),Le=n.defineMessage({id:"jr0/mV",defaultMessage:"No changes made"}),Ae=({onLogInOrSignUp:e,editorCanSave:t=!0})=>x.createElement(i.Text,{color:"faint"},x.createElement(d.FormattedMessage,{id:"3UzzHS",defaultMessage:"<btn>Log in</btn> or <btn>Sign up</btn> to save",values:{btn:a=>x.createElement(i.Box,{as:i.Button,variant:"transparent",onClick:e,fontFamily:"Text",disabled:!t},a)}}));Ae.displayName="LoggedOutChangesLabel";const be=({hasEditorChanges:e,isEditorReady:t,editorCanSave:a,onLogInOrSignUp:r,color:o,showLoggedOutLabel:s})=>{const l=n.useIntl(),c=e?we:Le;return t?x.createElement(i.Box,{display:"flex",flexDirection:"column",borderWidth:"1",borderColor:"Border Subtle",borderRight:"Solid",paddingRight:"Micro Large"},x.createElement(i.Text,{color:o},l.formatMessage(c)),s&&x.createElement(Ae,{onLogInOrSignUp:r,editorCanSave:a})):null};be.displayName="TitleBarEditorChangesDisplay";i.injectInternalStyle("/static/js/file_viewer/titlebar/editor_actions.module.out-vflVp6gai.css",(e=>"._titleBarActionButtons_s9sre_1{display:flex}._titleBarActionButtons_s9sre_1>*{margin-left:var(--dig-spacing__micro__small)}"));var Te;!function(e){e.SAVE_COPY="SAVE_COPY",e.REPLACE_ORIGINAL="REPLACE_ORIGINAL"}(Te||(Te={}));const Ce=n.defineMessage({id:"wKJF7t",defaultMessage:"Save a copy"}),Re=n.defineMessage({id:"3bimYD",defaultMessage:"Replace original"}),ye=n.defineMessage({id:"bCvfFu",defaultMessage:"Save"}),Pe=n.defineMessage({id:"H9szIK",defaultMessage:"Cancel"}),Ne=({titleBarActionGetters:e,canEdit:t,size:a})=>{const r=n.useIntl(),{onSaveReplace:o,isEditorReady:s,onCancel:l,onSaveCopy:c,hasEditorChanges:u,editorCanSave:d}=e,_=!s||!u||!d,f=x.useCallback((e=>{switch(e){case Te.REPLACE_ORIGINAL:null==o||o();break;case Te.SAVE_COPY:null==c||c()}}),[c,o]);return x.createElement("div",{className:"_titleBarActionButtons_s9sre_1"},x.createElement(i.Button,{variant:"opacity",size:a,onClick:l},r.formatMessage(Pe)),t?x.createElement(i.Menu.Wrapper,{onSelection:f},(({getTriggerProps:e,getContentProps:t})=>x.createElement(x.Fragment,null,x.createElement(i.Button,{variant:"primary",size:a,withDropdownIcon:!0,...e(),disabled:_},r.formatMessage(ye)),x.createElement(i.Menu.Content,{...t()},x.createElement(i.Menu.Segment,null,x.createElement(i.Menu.ActionItem,{value:Te.SAVE_COPY},r.formatMessage(Ce)),x.createElement(i.Menu.ActionItem,{value:Te.REPLACE_ORIGINAL},r.formatMessage(Re))))))):x.createElement(i.Button,{variant:"primary",size:a,onClick:c,disabled:_},r.formatMessage(Ce)))};Ne.displayName="TitleBarEditorActionButtons";const Oe=({breakpoint:e})=>e===B.FileViewerBreakpoint.LG?x.createElement("div",{className:f.separator}):null;Oe.displayName="TitleBarSeparator";const ke=n.defineMessage({id:"ZcVVjw",defaultMessage:"{file_number} of {file_count}"}),Be=n.defineMessage({id:"FRXiLI",defaultMessage:"{file_number} of many"}),Me=n.defineMessage({id:"4EnS68",defaultMessage:"Navigate to the previous file"}),De=n.defineMessage({id:"IqM7nt",defaultMessage:"Navigate to the next file"}),xe=({fileCollectionContext:e})=>{const t=n.useIntl(),{featureConfig:a}=i.useFileViewerContext(),{flipToNextFile:r,flipToPreviousFile:o}=R.useFileFlippingCallbacks();if(!e||0===e.parent_files_count)return null;const s=e.file_index,l=e.parent_files_count,c=e.parent_files_count<1e3?t.formatMessage(ke,{file_number:s+1,file_count:l}):t.formatMessage(Be,{file_number:s+1}),u=!!a.file_flipping&&l>1;return x.createElement("div",{className:f.titleBarFileCounterContainer},u&&x.createElement(i.IconButton,{"aria-label":t.formatMessage(Me),disabled:0===s,onClick:()=>{o(i.UserActionContext.PreviewTopNav)},size:"small",variant:"borderless"},x.createElement(i.UIIcon,{src:M.ArrowLeftLine,width:"20px",height:"20px"})),x.createElement(i.Text,{className:f.titleBarFileCounter,"data-testid":"title-bar-file-counter",size:"small"},c),u&&x.createElement(i.IconButton,{"aria-label":t.formatMessage(De),disabled:s===l-1,onClick:()=>r(i.UserActionContext.PreviewTopNav),size:"small",variant:"borderless"},x.createElement(i.UIIcon,{src:i.ArrowRightLine,width:"20px",height:"20px"})))};xe.displayName="TitleBarFileCounter";const Ve=({previewSurface:e,activePreviewFile:t,commentIconWithUnreadCount:a,user:n,showAuthModal:s,breakpoint:l,canRestoreRevision:c})=>{var d;const{pluginArgs:_}=u.usePluginMigrationContext(),{fileViewerId:g,logUserAction:p}=i.useFileViewerContext(),m=e===i.SDKPreviewSurface.LOW_DISTRACTION_VIEW,h=!n,E=e!==i.SDKPreviewSurface.BACKUP&&e!==i.SDKPreviewSurface.SHARED_COLLECTION&&e!==i.SDKPreviewSurface.VERSION_HISTORY&&e!==i.SDKPreviewSurface.DESKTOP_PREVIEW,v=l===B.FileViewerBreakpoint.SM,S=n||!v,I=i.isPolluxDesktopSurface(e),w=i.useRootFile(),{data:L}=k.useFileContentMetadataQuery(w),A=null===(d=null==L?void 0:L.apiData)||void 0===d?void 0:d.metadata,b=e===i.SDKPreviewSurface.POLLUX_DESKTOP_SEARCH_PREVIEW&&l!==B.FileViewerBreakpoint.LG;return x.createElement("div",{className:f.titleBarActionButtons,"data-tooltip":"title-bar-right-section"},h&&m&&x.createElement(q,{showAuthModal:s,activePreviewFile:t}),!v&&!b&&x.createElement(x.Fragment,null,!!a&&x.createElement(r.CommentTitleBarRightSectionButton,{fileViewerId:g,activePreviewFile:t,commentIconWithUnreadCount:a}),x.createElement(o.DownloadActionButton,{logUserAction:p,previewSurface:e,fileContentMetadata:A,..._,fileName:null==w?void 0:w.name}),I&&x.createElement(o.VersionHistoryActionButton,null)),E&&S&&x.createElement(Ee,{activeFile:t.file,previewSurface:e,user:n}),h&&!m&&x.createElement(x.Fragment,null,x.createElement(Oe,{breakpoint:l}),x.createElement(j,{showAuthModal:s,activePreviewFile:t})))};Ve.displayName="TitleBarActionButtons";const Ue=e=>{const{previewSurface:t,passSessionId:a,pluginArgs:n}=u.usePluginMigrationContext(),{isLoggedIn:r}=i.useFileViewerContext(),o=!!y.useActiveEditorId(),s=i.useRootFileMetadata(),l=null==s?void 0:s.file_collection_context,c=i.useRootPreviewType(),d=Y(),_=c===i.PreviewType.Image&&!r,{user:g,canRestoreRevision:p,getActiveFile:m}=n,h=m(),{file:E}=h,v=i.isBrowseFile(E)&&!E.read_only,S=i.useCanWatermarkFile({file:h.file,user:g}),I=(({activePreviewFile:{file:e,sharePermission:t},previewSurface:a})=>i.isSharedFile(e)?!!t&&t.canViewMetadataRoles.length>0:a!==i.SDKPreviewSurface.VERSION_HISTORY)({previewSurface:t,activePreviewFile:h})&&e.breakpoint!==B.FileViewerBreakpoint.SM,w=e.breakpoint===B.FileViewerBreakpoint.MD;return x.createElement("div",{className:f.titleBarRightSection},o?x.createElement("div",{className:f.editorActions},x.createElement(be,{hasEditorChanges:e.titleBarActionGetters.hasEditorChanges,isEditorReady:e.titleBarActionGetters.isEditorReady,editorCanSave:e.titleBarActionGetters.editorCanSave,onLogInOrSignUp:()=>{var t,a;null===(a=(t=e.titleBarActionGetters).onSaveCopy)||void 0===a||a.call(t),e.showAuthModal(H({action:"edit"},c,void 0))},color:"faint",showLoggedOutLabel:_}),x.createElement(Ne,{titleBarActionGetters:e.titleBarActionGetters,canEdit:v||S,size:"large"})):x.createElement(x.Fragment,null,x.createElement("div",{className:f.titleBarRightSectionTopRow},x.createElement(x.Fragment,null,x.createElement(d,{activePreviewFile:h,passSessionId:a,enablePassUi:I,user:g,onlyShowOverflow:w}),I&&x.createElement(Oe,{breakpoint:e.breakpoint})),l&&e.breakpoint===B.FileViewerBreakpoint.LG&&x.createElement(x.Fragment,null,x.createElement(xe,{fileCollectionContext:l}),x.createElement(Oe,{breakpoint:e.breakpoint})),x.createElement(Ve,{commentIconWithUnreadCount:e.commentIconWithUnreadCount,showAuthModal:e.showAuthModal,breakpoint:e.breakpoint,canRestoreRevision:p||!1,activePreviewFile:h,user:g,previewSurface:t}))))};Ue.displayName="TitleBarRightSection";var Fe=Object.freeze({__proto__:null,TitleBarActionButtons:Ve,TitleBarFileCounter:xe,TitleBarRightSection:Ue,fileCounterMessage:ke,manyFilesCounterMessage:Be});t.INITIAL_ACTION_QUERY_PARAM=U,t.LoggedOutChangesLabel=Ae,t.TitleBarRightSection=Ue,t.UserEducationEffect=X,t.fileCounterMessage=ke,t.getActionContinuationModalProps=(e,t,a)=>{const n=H(e,t,a);return{signup_tag:n.signupTag,onCancel:n.onCancel,googleRegisterProps:n.sharedLinkUrl?{signupContinuationUrl:n.sharedLinkUrl}:void 0,loginContinuationUrl:n.sharedLinkUrl}},t.getActionElementForPAP=Z,t.getActionFromURL=()=>{const e=new URL(window.location.href);let t;for(const a of F)if("1"===e.searchParams.get(a)){t=a;break}if(!t||!function(e){return F.includes(e)}(t))return;const a=e.searchParams.get(U),n=a&&function(e){if(!e)return!0;for(const t of[K,z])if(t(e))return!0;return!1}(a)?a:void 0;return V([U]),{action:t,initialAction:n}},t.isUngatedEditorInitialAction=z,t.loggedOutEditButtonTooltip=G,t.loggedOutSUSIAndActionContinuationHandler=(t,a,n,i)=>async()=>{const{showAuthModal:r}=await new Promise((function(t,a){e(["./c_file_viewer_common_show_auth_modal"],t,a)})).then((function(e){return e.show_auth_modal_esnext})),o=H(t,a,n);r({...o,onCancel:()=>{var e;null===(e=o.onCancel)||void 0===e||e.call(o),null==i||i()}})},t.manyFilesCounterMessage=Be,t.removeFragmentFromURL=e=>{const t=window.location.href.replace(e,"");window.history.replaceState(null,"",t)},t.removeQueryParams=V,t.title_bar_right_section_esnext=Fe}));
//# sourceMappingURL=c_file_viewer_title_bar_title_bar_right_section.js-vflPSPlt2.map

//# debugId=2c544191-56f7-3de6-add6-0c9408f7f997