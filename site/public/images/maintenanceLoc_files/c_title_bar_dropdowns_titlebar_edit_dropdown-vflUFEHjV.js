!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ff5199f7-dee3-3660-a2ef-7d67ebb915b7")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./c_action_bar_action_bar_strings","./e_file_viewer_static_scl_page_folder","./c_photo-editor_plugin_use_image_enhancements","./c_preview_audio_video_video_editing_strings","./c_dig-icons_assets_ui-icon_line_shape-rotate-right","./c_action_plugins_audio_video_edit_action_definition","./c_action_plugins_conversion_action_conditions","./c_action_plugins_download_action_definition","./c_dig-icons_assets_ui-icon_line_text-box","./c_dig-icons_assets_ui-icon_line_scale","./c_dig-icons_assets_ui-icon_line_stamp","./c_dig-icons_assets_ui-icon_line_signature","./c_dig-icons_assets_ui-icon_line_upload-file","./c_file_viewer_context_migration_context","./c_integrations_data_selectors","./c_file_viewer_api_navigation","./c_core_data_ui","./c_file_viewer_components_titlebar_menu_content","./c_react_query_helpers_queries_file_content_metadata","./c_preview_audio_video_helper_dimensions","./e_core_exception","./c_lodash","./c_src_sink_index","./c_pap-events_docsend_view_docsend_hub_entry_button","./c_api_v2_routes_password_confirmation_provider","metaserver/static/js/langpack","./e_edison","./c_api_v2_routes_folders_info_provider","./e_data_modules_stormcrow","./c_core_notify","react-dom","metaserver/static/js/modules/constants/viewer","./c_api_v2_routes_team_provider","./c_admin_registration_source_constants","./c_google_one_tap_google_one_tap_platform","./c_pap-events_sign_save_signature_doc","./c_atoms_dwg-box_index","./c_helpers_hooks_component-did-mount","./c_dig-icons_assets_ui-icon_line_rewind","./c_react-transition-group_CSSTransition","./c_ungated_idx_db_access_lib","./c_memoize-one","./c_preview_audio_video_video_editing_utils","./c_core_logging_actions","./c_api_v2_routes_hellosign_provider","./c_dig-icons_assets_ui-icon_line_shuffle","./c_pdf_editor_plugin_show_plugin_util","./c_file_viewer_hooks_usePrevious","./c_core_data_actions","./c_react-redux_hooks_useDispatch"],(function(e,i,t,n,o,r,c,a,s,_,d,l,u,A,g,E,S,p,f,T,I,v,N,C,P,h,b,R,U,L,w,D,m,O,y,M,F,k,x,H,G,W,V,K,B,j,X,z,q,Q,Y,Z,$,J){"use strict";function ee(e){if(e&&e.__esModule)return e;var i=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),i.default=e,Object.freeze(i)}var ie=ee(t);const te=({logUserAction:e,setActiveEditorCallback:i})=>[{icon:s.ShapeRotateLeftLine,label:a.ROTATE_LEFT_TOOLTIP,userAction:r.UserAction.RotateLeft,disabled:{disabled:!1},action:{type:"click",handler:c.rotateLeftHandler(e,i,r.UserActionContext.EditMenu)}},{icon:s.ShapeRotateRightLine,label:a.ROTATE_RIGHT_TOOLTIP,userAction:r.UserAction.RotateRight,disabled:{disabled:!1},action:{type:"click",handler:c.rotateRightHandler(e,i,r.UserActionContext.EditMenu)}}],ne=({logUserAction:e,setActiveEditorCallback:i})=>[{icon:s.FlipHorizontalLine,label:a.FLIP_HORIZONTAL_LABEL,userAction:r.UserAction.FlipHorizontal,disabled:{disabled:!1},action:{type:"click",handler:c.flipHorizontalHandler(e,i,r.UserActionContext.EditMenu)}},{icon:s.FlipVerticalLine,label:a.FLIP_VERTICAL_LABEL,userAction:r.UserAction.FlipVertical,disabled:{disabled:!1},action:{type:"click",handler:c.flipVerticalHandler(e,i,r.UserActionContext.EditMenu)}}],oe=({logUserAction:e,setActiveEditorCallback:i})=>({icon:s.CropLine,label:a.CROP_TOOLTIP,disabled:{disabled:!1},userAction:r.UserAction.Crop,action:{type:"click",handler:c.cropHandler(e,i,r.UserActionContext.EditMenu)}}),re=({logUserAction:e,setActiveEditorCallback:i,previewType:t})=>({icon:s.CutLine,label:a.TRIM_TOOLTIP,userAction:r.UserAction.Trim,disabled:{disabled:!1},action:{type:"click",handler:c.trimHandler(e,i,r.UserActionContext.EditMenu)}}),ce=(e,i,t)=>{if(!d.getActionCondition(e,_.audioVideoEditingActionCondition))return[];const n=e.previewType===r.PreviewType.Video,o=e.previewType===r.PreviewType.Audio;return n?ae(i,t):o?se(i,t):[]},ae=(e,i)=>{const t={logUserAction:e,setActiveEditorCallback:i,previewType:r.PreviewType.Video};return[re(t),oe(t),...te(t),...ne(t)]},se=(e,i)=>{const t={logUserAction:e,setActiveEditorCallback:i,previewType:r.PreviewType.Video};return[re(t)]},_e=n.defineMessage({id:"1wQEUl",defaultMessage:"Rotate right"}),de=n.defineMessage({id:"2BgLiN",defaultMessage:"Rotate left"}),le=n.defineMessage({id:"tupnL9",defaultMessage:"Crop"}),ue=n.defineMessage({id:"VghM9c",defaultMessage:"Flip"}),Ae=n.defineMessage({id:"nUBVPc",defaultMessage:"Adjust"}),ge=n.defineMessage({id:"qBO39c",defaultMessage:"Enhance"}),Ee=d.withActionCondition(_.imageEditingActionCondition,((e,i,t,n,o,a,_)=>((e,i,t,n,o,a)=>{const _=(null==n?void 0:n.upscale)||(null==n?void 0:n.colorCorrect)||(null==n?void 0:n.autoStraighten)||(null==n?void 0:n.filter),d=[{icon:s.ShapeRotateLeftLine,label:de,userAction:r.UserAction.RotateLeft,disabled:{disabled:!1},action:{type:"click",handler:c.onRotate(c.RotationDirection.LEFT,e,i,r.UserActionContext.EditMenu)}},{icon:s.ShapeRotateRightLine,label:_e,userAction:r.UserAction.RotateRight,disabled:{disabled:!1},action:{type:"click",handler:c.onRotate(c.RotationDirection.RIGHT,e,i,r.UserActionContext.EditMenu)}},{icon:s.FlipHorizontalLine,label:ue,userAction:r.UserAction.FlipHorizontal,disabled:{disabled:!1},action:{type:"click",handler:c.onFlip(e,i,r.UserActionContext.EditMenu)}},{icon:s.CropLine,label:le,userAction:r.UserAction.Crop,disabled:{disabled:!1},action:{type:"click",handler:c.onCrop(e,i,r.UserActionContext.EditMenu)}},{icon:u.SliderLine,label:Ae,userAction:r.UserAction.Adjust,disabled:{disabled:!1},action:{type:"click",handler:c.onAdjust(e,i,r.UserActionContext.EditMenu)}}];if(t&&_){let t;o&&"image"===o[".tag"]&&o.image_width&&o.image_height&&(t={width:o.image_width,height:o.image_height}),d.push({icon:A.ImageEnhanceLine,label:ge,userAction:r.UserAction.Enhance,disabled:{disabled:!1},action:{type:"menu",menu:ie.default.createElement(c.MagicTools,{onUpscale:c.onUpscale(e,i,r.UserActionContext.EditMenu),onColorCorrect:c.onColorCorrect(e,i,r.UserActionContext.EditMenu),onAutoStraighten:c.onAutoStraighten(e,i,r.UserActionContext.EditMenu),onFilter:c.onImageFilter(e,i,r.UserActionContext.EditMenu),imageDimensions:t,previewsImageEnhancements:n})}})}return d.concat(a)})(i,t,n,o,a,_)),[]),Se=d.withActionCondition(_.pdfEditActionCondition,((i,t,n,a,s)=>[{label:o.EDIT_PDF_ACTION_STRING,icon:g.EditLine,userAction:r.UserAction.EditPdf,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:s},r.UserActionContext.EditMenu,(e=>{let i=c.NonSignEntryPoints.DEFAULT_ENTRY_POINT;return e===r.SDKPreviewSurface.BROWSE?i=c.NonSignEntryPoints.BROWSE_PREVIEW_EDIT_PDF:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?i=c.NonSignEntryPoints.STANDALONE_PREVIEW_EDIT_PDF:e===r.SDKPreviewSurface.SHARED_LINK&&(i=c.NonSignEntryPoints.SHARED_LINK_EDIT_PDF),i})(s))))}}]),[]),pe=d.withActionCondition(_.pdfEditActionCondition,((i,t,n,a,s,_,d)=>{const l=[{label:o.DRAW_PDF_ACTION_STRING,icon:u.ScribbleLine,userAction:r.UserAction.Draw,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:d},r.UserActionContext.EditMenu,(e=>{let i=c.NonSignEntryPoints.UNFURL_ACTIONS_DRAW;return e===r.SDKPreviewSurface.BROWSE?i=c.NonSignEntryPoints.BROWSE_PREVIEW_UNFURL_ACTIONS_DRAW:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?i=c.NonSignEntryPoints.STANDALONE_PREVIEW_UNFURL_ACTIONS_DRAW:e===r.SDKPreviewSurface.SHARED_LINK&&(i=c.NonSignEntryPoints.SHARED_LINK_UNFURL_ACTIONS_DRAW),i})(d))))}}],E=[{label:o.HIGHLIGHT_PDF_ACTION_STRING,icon:u.HighlightLine,userAction:r.UserAction.Highlight,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:d},r.UserActionContext.EditMenu,(e=>{let i=c.NonSignEntryPoints.UNFURL_ACTIONS_HIGHLIGHT;return e===r.SDKPreviewSurface.BROWSE?i=c.NonSignEntryPoints.BROWSE_PREVIEW_UNFURL_ACTIONS_HIGHLIGHT:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?i=c.NonSignEntryPoints.STANDALONE_PREVIEW_UNFURL_ACTIONS_HIGHLIGHT:e===r.SDKPreviewSurface.SHARED_LINK&&(i=c.NonSignEntryPoints.SHARED_LINK_UNFURL_ACTIONS_HIGHLIGHT),i})(d))))}}],S=[{label:o.ADD_TEXT_PDF_ACTION_STRING,icon:u.TextBoxLine,userAction:r.UserAction.AddText,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:d},r.UserActionContext.EditMenu,(e=>{let i=c.NonSignEntryPoints.UNFURL_ACTIONS_ADD_TEXT;return e===r.SDKPreviewSurface.BROWSE?i=c.NonSignEntryPoints.BROWSE_PREVIEW_UNFURL_ACTIONS_ADD_TEXT:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?i=c.NonSignEntryPoints.STANDALONE_PREVIEW_UNFURL_ACTIONS_ADD_TEXT:e===r.SDKPreviewSurface.SHARED_LINK&&(i=c.NonSignEntryPoints.SHARED_LINK_UNFURL_ACTIONS_ADD_TEXT),i})(d))))}}],p=s?[{label:o.EDIT_TEXT_PDF_ACTION_STRING,icon:A.PlaceholderTextLine,userAction:r.UserAction.EditPdfText,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:d},r.UserActionContext.EditMenu,(e=>{let i=c.NonSignEntryPoints.UNFURL_ACTIONS_EDIT_TEXT;return e===r.SDKPreviewSurface.BROWSE?i=c.NonSignEntryPoints.BROWSE_PREVIEW_UNFURL_ACTIONS_EDIT_TEXT:e===r.SDKPreviewSurface.STANDALONE_PREVIEW?i=c.NonSignEntryPoints.STANDALONE_PREVIEW_UNFURL_ACTIONS_EDIT_TEXT:e===r.SDKPreviewSurface.SHARED_LINK&&(i=c.NonSignEntryPoints.SHARED_LINK_UNFURL_ACTIONS_EDIT_TEXT),i})(d))))}}]:[];return[...l,...E,...S,...p,..._,...[{label:o.ALL_EDITING_TOOLS_ACTION_STRING,icon:g.EditLine,userAction:r.UserAction.EditPdf,disabled:{disabled:!1},action:{type:"click",handler:()=>new Promise((function(i,t){e(["./c_action_plugins_pdf_edit_action_action"],i,t)})).then((({pdfEditAction:e})=>e({setActiveEditorCallback:n,logUserAction:t,getCurrentPage:a,previewSurface:d},r.UserActionContext.EditMenu)))}}]]}),[]),fe=d.withActionCondition(c.selfSignActionCondition,((e,i,t,n,o,a,s,_,d)=>{if(o||a)return;const l=c.getSelfSignActionArgs(i,t,e.user,e.file,n,r.UserActionContext.EditMenu,s);return Ie(l,_,d)}),void 0),Te=d.withActionCondition(c.loggedOutSelfSignActionCondition,((e,i,t,n,o,a,s,_,d)=>{if(o||a)return;const l=c.getSelfSignActionArgs(i,t,e.user,e.file,n,r.UserActionContext.EditMenu,s);return Ie(l,_,d)}),void 0),Ie=(i,t,n)=>({label:n?o.SIGN_YOURSELF_ACTION_STRING:o.SELF_SIGN_ACTION_STRING,icon:E.SignatureLine,userAction:r.UserAction.SelfSign,disabled:{disabled:!1},action:{type:"click",handler:async()=>{i.user?await new Promise((function(i,t){e(["./c_action_plugins_self_sign_action_action"],i,t)})).then((({selfSignAction:e})=>e(i))):null==t||t()}}}),ve=d.withActionCondition(c.sendForSignatureActionCondition,((e,i,t,n,o,r,a,s,_)=>{if(o||r)return;const d=c.getActionArgs(t,i,e.user,e.file,n,a);return Ce(d,s,_)}),void 0),Ne=d.withActionCondition(c.loggedOutSendForSignatureActionCondition,((e,i,t,n,o,r,a,s,_)=>{if(o||r)return;const d=c.getActionArgs(t,i,e.user,e.file,n,a);return Ce(d,s,_)}),void 0),Ce=(i,t,n)=>({label:n?o.GET_SIGNAURES_ACTION_STRING:o.SEND_FOR_SIGNATURE_ACTION_STRING,icon:n?A.SignableDocumentPictogram:S.SendLine,userAction:r.UserAction.SendForSignature,disabled:{disabled:!1},action:{type:"click",handler:async()=>{i.user?await new Promise((function(i,t){e(["./c_action_plugins_send_for_signature_action_action"],i,t)})).then((({sendForSignatureAction:e})=>e(i))):null==t||t()}}}),Pe=d.withActionCondition(c.textEditingActionCondition,((e,i,t)=>((e,i)=>[{icon:g.EditLine,label:c.editContentText,disabled:{disabled:!1},action:{type:"click",handler:c.onEdit(e,i,r.UserActionContext.EditMenu)},userAction:r.UserAction.EditText}])(i,t)),[]),he=d.withActionCondition(c.watermarkActionCondition,((e,i)=>({label:n.defineMessage({id:"MqyPTe",defaultMessage:"Watermark"}),userAction:r.UserAction.Watermark,disabled:{disabled:!1},icon:g.StampLine,action:{type:"click",handler:async()=>i(c.WATERMARKING_PLUGIN_ID,r.UserActionContext.EditMenu)}})),void 0);i.default=({contentProps:i,setMenuDisabled:t})=>{var a,s;const _=n.useIntl(),{pluginArgs:d,previewSurface:u}=p.usePluginMigrationContext(),{logUserAction:A,featureConfig:g}=r.useFileViewerContext(),E=null!==(a=r.useCurrentPreviewMetadata().previewType)&&void 0!==a?a:r.PreviewType.Loading,S=d.getActiveFile().file,P=d.getActiveFile().sharePermission,h=d.getActiveFile().sharedLinkInfo,b=I.useCurrentPageCount(),R=T.useSetActiveEditorCallback(),U=r.useIsNestedArchiveFile(),L=r.useRootFile(),{data:w}=N.useFileContentMetadataQuery(L),D=null===(s=null==w?void 0:w.apiData)||void 0===s?void 0:s.metadata,{variant:m}=r.useExperimentVariant("pdf_editing_text_editing"),O=m&&["INLINE","UPSELL"].includes(m),y=["V1","V2"].includes(g.previews_toolbar_optimization),M=I.useGetCurrentDocPageCallback(),{user:F,encryptionOptions:k}=d,x=f.useUserHasDmtConflict(),H=f.useShouldDisableFeaturesIfTeamSuspended(),G=ie.useMemo((()=>({file:S,user:F,previewSurface:u,previewType:E,isNestedArchiveFile:U,sharePermission:P,sharedLinkInfo:h})),[S,F,u,E,P,U,h]),W=c.useImageEnhancements(F).previewsImageEnhancements,V=((e,i)=>{const t=r.useCanWatermarkFile({file:e.file,user:e.user});return ie.default.useMemo((()=>t?he(e,i):void 0),[t,e,i])})(G,R),K=ie.useMemo((()=>!y&&V?[V]:[]),[y,V]),B=ie.useMemo((()=>y&&V?[V]:[]),[y,V]),j=ie.useMemo((()=>async()=>{const{showAuthModal:i}=await new Promise((function(i,t){e(["./c_file_viewer_common_show_auth_modal"],i,t)})).then((function(e){return e.show_auth_modal_esnext}));i({...{mode:r.AuthMode.REGISTER,encryptionOptions:k,kind:r.LoginOrRegisterKind$1.LOGGED_OUT_PDF_SIGN,authDialogPreviousElement:r.AuthDialogPreviousElementTag.EDIT,loggingExtra:{signup_source:"sign"},sharedLinkUrl:null==h?void 0:h.url,webSignInTag:r.getWebSignInTag(!!G.user,G.previewSurface,G.sharePermission),sharedLinkInfo:h}})}),[G.previewSurface,G.sharePermission,G.user,k,h]),X=y&&r.isSharedFile(G.file),z=X?Te:fe,q=X?Ne:ve,Q=ie.useMemo((()=>{const e=E===r.PreviewType.Image&&y?[]:[z(G,A,R,b,x,H,G.previewSurface,j,y),q(G,A,R,b,x,H,G.previewSurface,j,y)];return[[...y?pe(G,A,R,M,O,B,G.previewSurface):Se(G,A,R,M,G.previewSurface),...Ee(G,R,A,y,W,D,B),...ce(G,A,R),...Pe(G,R,A)],[...K,...e]]}),[G,A,R,M,K,b,x,H,E,B,W,O,y,D,z,q,j]),Y=c.useAudioVideoEditDisabledTooltipMsg(null==L?void 0:L.name,null==L?void 0:L.size),Z=C.useIsAudioOnlyVideo(),$=E===r.PreviewType.Image||E===r.PreviewType.SsrDoc;let J;const ee=Q.every((e=>e.every((e=>!e))));Y?J=Y:l.isDownloadPluginEnabled(S,P)?d.user||$?(ee||Z)&&(J=_.formatMessage({id:"qURjdV",defaultMessage:"Not available for this file"})):J=_.formatMessage({id:"8QvtQB",defaultMessage:"Log in or sign up to edit"}):J=_.formatMessage(o.DISABLED_FOR_THIS_FILE_TOOLTIP_STRING),ie.useEffect((()=>{t({disabled:!!J,tooltip:J})}),[t,Q,J]);const te=ie.useCallback((e=>A(e,r.UserActionContext.EditMenu)),[A]);return ie.createElement(v.TitlebarMenuContent,{contentProps:i,elementId:"edit-menu",options:Q,logAction:te})}}));
//# sourceMappingURL=c_title_bar_dropdowns_titlebar_edit_dropdown.js-vflWZFnyB.map

//# debugId=ff5199f7-dee3-3660-a2ef-7d67ebb915b7