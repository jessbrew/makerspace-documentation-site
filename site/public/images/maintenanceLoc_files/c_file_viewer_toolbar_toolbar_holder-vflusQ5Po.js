!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9cc71d1d-57e1-3154-acbf-1468a830cc1b")}catch(e){}}();
define(["exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_folder","./c_core_data_ui","./c_file_viewer_components_preview_button","./c_file_viewer_hooks_use_mouse_active","./c_file_viewer_keyboard_bindings","./c_preview_audio_video_helper_dimensions","./c_file_viewer_toolbar_toolbar_holder2","./c_juggle_resize-observer_ResizeObserver","./c_file_viewer_toolbar_utils"],(function(e,t,n,o,l,a,i,r,c,s,d,u){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}var m=f(t);const p=()=>{const[e,t]=m.default.useState(null),[n,o]=m.default.useState();return m.default.useEffect((()=>{if(!e)return;const t=new d.ResizeObserver((e=>o(e[0].contentRect)));return t.observe(e),o(e.getBoundingClientRect()),()=>t.disconnect()}),[e]),{nodeRef:t,contentRect:n,node:e}},g=e=>(t,n)=>n?[...t,n.offsetLeft+n.offsetWidth-e]:t,b=(e,t)=>(n,o,l)=>o>e||!t(l)&&o+48>e?n:n+1,h=m.default.memo((({actions:e,logAction:t})=>{if(!e)return null;const n=[],o=e=>{const o=e.handler;"click"===o.type&&o.keyboardBinding&&n.push(r.getKeyboardBinding({...o.keyboardBinding,callback:()=>{o.handler(),e.actionType&&t(e.actionType,!1,!0)}}))};return e.editActions.forEach(o),e.fileActions.forEach(o),m.default.createElement(r.KeyboardBindingConnector,{name:"action_bar",keyboardBindings:n})}));h.displayName="ActionBarKeyboardBindings";const y=e=>l.useIsFullscreen()?m.default.createElement("div",{className:s.actionBar}):m.default.createElement(A,{...e});y.displayName="ActionBar";const A=({actions:e,logAction:t,breakpoint:n,previewsToolbarOptimizationVariant:a})=>{const r=o.useRootPreviewType(),d=!!l.useActiveEditorId(),f=c.useIsAudioOnlyVideo(),y=d||r===o.PreviewType.Loading,A=y||f,{containerRef:E,editActions:v,getEditButtonRef:_,fileActions:B,getFileButtonRef:O,overflowActions:M}=((e,t)=>{const{editActions:n=[],fileActions:o=[],overflowActions:l=[]}=null!=e?e:{},[a,i]=m.default.useState(),[r,c]=m.default.useState(),[s,d]=m.default.useState(),[u,f]=m.default.useState(),{nodeRef:h,node:y}=p(),A=m.default.useRef([]),w=m.default.useRef([]);e!==a&&(A.current=new Array(n.length),w.current=new Array(o.length)),m.default.useLayoutEffect((()=>{var n;i(e),c(t);const o=null!==(n=null==y?void 0:y.offsetLeft)&&void 0!==n?n:0;d(A.current.reduce(g(o),[])),f(w.current.reduce(g(o),[]))}),[e,t]);const E=y?y.offsetWidth:0,{shownEditActions:v,shownFileActions:_,shownOverflowActions:B}=m.default.useMemo((()=>{if(e!==a||t!==r||!E||!s||!u)return{shownEditActions:n,shownFileActions:o,shownOverflowActions:l};const i=!!o.length,c=!!l.length,d=s.reduce(b(E,(e=>!(i||c)&&e===s.length-1)),0);if(d<n.length)return{shownEditActions:n.slice(0,d),shownFileActions:[],shownOverflowActions:[n.slice(d),o,...l]};const f=u.reduce(b(E,(e=>!c&&e===u.length-1)),0);return{shownEditActions:n,shownFileActions:o.slice(0,f),shownOverflowActions:[o.slice(f),...l].filter((e=>0!==e.length))}}),[e,a,t,r,E,s,u,o,l,n]),O=m.default.useCallback((e=>t=>A.current[e]=t),[]),k=m.default.useCallback((e=>t=>w.current[e]=t),[]);return{containerRef:h,editActions:v,getEditButtonRef:O,fileActions:_,getFileButtonRef:k,overflowActions:B}})(e,n),I=!u.isToolbarOptimizationExperimentEnabled(a)&&v.length>0&&B.length>0,T=u.isToolbarIconsOnly(n),R=n===i.FileViewerBreakpoint.SM;return m.default.createElement("div",{className:s.actionBar,ref:E},m.default.createElement(h,{actions:e,logAction:t}),m.default.createElement("div",{className:s.actionBarButtons},v.map(((e,n)=>m.default.createElement(w,{action:e,key:n,disabled:e.disabled||A,buttonRef:_(n),iconOnly:T,logAction:t}))),I&&m.default.createElement(s.ToolbarSeparator,null),B.map(((e,n)=>m.default.createElement(w,{action:e,key:n,disabled:e.disabled||y,buttonRef:O(n),iconOnly:R,logAction:t})))),m.default.createElement(k,{actionGroups:M,logAction:t}))};A.displayName="ActionBarContent";const w=({action:e,...t})=>{const n=e.handler;return"click"===n.type?m.default.createElement(v,{action:{...e,handler:n},...t}):m.default.createElement(B,{action:{...e,handler:n},...t})};w.displayName="ToolbarAction";const E=m.default.forwardRef((({action:e,iconOnly:t,...l},i)=>{const r=n.useIntl(),c={variant:"borderless",ref:i},{label:d,icon:u,tooltip:f,campaignElementId:p}=e,g="string"==typeof d?d:r.formatMessage(d),b=m.default.createElement(o.UIIcon,{src:u,width:"20px",height:"20px"}),h=t||e.iconOnly?m.default.createElement(o.IconButton,{...c,...l,"aria-label":g,"data-campaigns-element-id":p},b):m.default.createElement(a.PreviewButton,{...c,...l,"data-campaigns-element-id":p},m.default.createElement("span",{className:s.actionBarButtonIcon},m.default.createElement(o.UIIcon,{isOpticallyAligned:!0,src:u,width:"20px",height:"20px"})),g),y=t&&!f?{text:g}:f;if(!y)return h;const A="string"==typeof y.text?y.text:r.formatMessage(y.text),w=y.keyboardShortcut?" "+y.keyboardShortcut:"";return m.default.createElement(o.Tooltip,{title:A+w,shouldCloseOnClick:!0,placement:"bottom"},m.default.createElement("span",null,h))}));E.displayName="ActionButton";const v=({action:e,disabled:t,iconOnly:n,buttonRef:l,logAction:a})=>{const i=o.useStabilizedCallback((()=>{e.handler.handler(),e.actionType&&a(e.actionType,!1,!1)}));return m.default.createElement(E,{action:e,iconOnly:n,onClick:i,disabled:t,ref:l})};v.displayName="ClickAction";const _=e=>{var t,n,o;(null==e?void 0:e.menuItem)&&"dropdown"===(null==e?void 0:e.nodeType)?null===(n=(t=e.menuItem).handler)||void 0===n||n.call(t):null===(o=null==e?void 0:e.handler)||void 0===o||o.call(e)},B=({action:e,disabled:t,iconOnly:n,buttonRef:l,logAction:a})=>{const i=()=>{e.actionType&&a(e.actionType,!1,!1)};return m.default.createElement(o.Menu.Wrapper,{onSelection:_},(({getContentProps:a,getTriggerProps:r})=>m.default.createElement(m.default.Fragment,null,m.default.createElement("span",{ref:l},m.default.createElement(E,{action:e,disabled:t,iconOnly:n,withDropdownIcon:!0,...r()})),m.default.createElement(o.Menu.Content,{...a(),onContentOpened:i},e.handler.menu))))};B.displayName="MenuAction";const O=({actions:e,logAction:t,isOverflowMenu:l})=>{const a=n.useIntl();return m.default.createElement(o.Menu.Segment,null,e.map((e=>{const{label:n,icon:i,handler:r,actionType:c,disabled:s,tooltip:d}=e,u="string"==typeof n?n:a.formatMessage(n),f=m.default.createElement(o.UIIcon,{src:i}),p="click"===r.type?m.default.createElement(o.Menu.ActionItem,{key:u,disabled:s,value:{handler:()=>{r.handler(),c&&t(c,l,!1)}},withLeftAccessory:f},u):m.default.createElement(o.Menu.Submenu,{key:u,withTriggerContent:u,withLeftAccessory:f,onSubmenuOpened:()=>{c&&t(c,l,!1)}},r.menu);return d?m.default.createElement(o.Tooltip,{title:d.text},p):p})))};O.displayName="ActionMenuItems";const k=({actionGroups:e,logAction:t})=>{const l=n.useIntl();if(!e||0===e.flat().length)return null;return m.default.createElement(o.Menu.Wrapper,{onSelection:_,onToggle:e=>{e.isOpen&&t(o.UserAction.OpenActionBarOverflow,!1,!1)}},(({getTriggerProps:n,getContentProps:a})=>m.default.createElement(m.default.Fragment,null,m.default.createElement(o.IconButton,{variant:"borderless",withDropdownIcon:!0,...n()},m.default.createElement(o.UIIcon,{src:o.MoreHorizontalLine,"aria-label":l.formatMessage({id:"CkWL4V",defaultMessage:"More"})})),m.default.createElement(o.Menu.Content,{...a(),"data-testid":"action-bar-overflow-menu"},e.map(((e,n)=>m.default.createElement(O,{key:n,actions:e,logAction:t,isOverflowMenu:!0})))))))};k.displayName="OverflowMenu";const M=({children:e,isFullscreen:t,noLeftMargin:n=!1,breakpoint:l,isEditMode:a,...r})=>m.default.createElement("div",{className:o.cx(s.toolbarHolder,{[s.fullscreen]:t,[s.small]:l===i.FileViewerBreakpoint.SM,[s.editMode]:a,[s.noLeftMargin]:n}),...r},e);M.displayName="ToolbarHolder",e.ActionBar=y,e.ToolbarAction=w,e.ToolbarHolder=M,e.useContentRect=p}));
//# sourceMappingURL=c_file_viewer_toolbar_toolbar_holder.js-vflf_N9uM.map

//# debugId=9cc71d1d-57e1-3154-acbf-1468a830cc1b